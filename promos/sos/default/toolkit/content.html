<!-- dev styles -->
<!-- <link rel="stylesheet" type="text/css" href="../css/styles.css"> -->

<div class="sale-promo">
	<a href="#details-promo" class="see-details">
		<picture>
			<source media="(min-width: 738px)" srcset="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sos/2019/0307/190307-d.png">
			<source media="(max-width: 737px)" srcset="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sos/2019/0307/190307-m.png">
			<img src="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sos/2019/0307/190307-m.png" alt="Take an extra 20% off newly reduced styles USE CODE: MARCH20" />
		</picture>
	</a>
</div>

<div class="size-promo">
	<picture>
		<source media="(min-width: 738px)" srcset="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sizes/2019/0117/190117-skinny-d-v3.png">
		<source media="(max-width: 737px)" srcset="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sizes/2019/0117/190117-skinny-m-v3.png">
		<img src="https://www.teacollection.com/mas_assets/media/tea_collection/promos/sizes/2019/0117/190117-skinny-m-v3.png" alt="more choices! Baby sizes through 4T and Girl sizes up to 12 are back in spring arrivals." />
	</picture>
</div>

<!-- FINE PRINT -->
<div id="details-promo">
	<div class="details-container">
		<div class="mobile-promo cta-drop-down">
			<a href="/sale/girls-clothing/view-all">girl</a>
			<a href="/sale/boys-clothing/view-all">boy</a>
			<a href="/sale/baby-girl-clothes/view-all">baby girl</a>
			<a href="/sale/baby-boy-clothes/view-all">baby boy</a>
			<a href="/sale/tween-girls-clothing/view-all" class="sale-cta">tween</a>
			<!-- <a href="/newborn-clothing" class="newborn-cta">newborn</a> -->
			<!-- <a href="/clothing-sale" class="sale-cta">sale</a> -->
		</div>
		<h2>Details</h2>
		<p>
			Enter code MARCH20 during checkout to receive an additional 20% off sale styles at teacollection.com. Offer valid only on the purchase of sale styles for a limited time only. Tea Collection product only, not applicable on third party product.
			Discount taken pre-tax. No adjustments on previous purchases. Not redeemable for cash. Cannot be combined with other promotions.
		</p>

		<p><a href="#" class="close-fancy mobile">CLOSE</a></p>
	</div>
</div>

<!-- toolkit -->
<style>
	html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}.sale-promo,.size-promo{display:none}.desktop-promo img,.desktop-promo-hp img,.mobile-promo img,.mobile-promo-hp img,.sale-promo img,.size-promo img{image-rendering:-webkit-optimize-contrast;max-width:100%}@media screen and (max-width:736px){.desktop-promo,.desktop-promo-hp{display:none}}.mobile-promo,.mobile-promo-hp{display:none}@media screen and (max-width:736px){.mobile-promo,.mobile-promo-hp{display:block;text-align:center;background:#c62695}}.mobile-promo img,.mobile-promo-hp img{image-rendering:-webkit-optimize-contrast}#details-promo{display:none;width:600px;min-height:158px;background:#fff}@media screen and (max-width:736px){#details-promo{width:100%;position:absolute;z-index:9999;height:100%;background:#fff}}#details-promo .details-container{margin:27px;padding:20px 0;background:#fff}#details-promo .details-container h2{text-transform:uppercase;font-size:15px;letter-spacing:1px;font-family:brown-pro-bold !important;font-weight:normal}#details-promo .details-container p{font-size:13px;line-height:20px}#details-promo .details-container .close-fancy{display:none;text-align:center}@media screen and (max-width:736px){#details-promo .details-container .close-fancy{display:block}}.cta-drop-down{overflow:hidden;background:#fff}.cta-drop-down a{font-size:10px;position:relative;padding:9px 0 7px;box-sizing:border-box;text-transform:uppercase;display:inline-block;width:45%;margin-right:2em;margin-bottom:2em;text-align:center;background:#7AABA7;color:#fff;text-decoration:none;letter-spacing:1px;font-family:brown-pro-bold !important}.cta-drop-down a:nth-of-type(even){margin-right:0}.cta-drop-down a.newborn-cta,.cta-drop-down a.sale-cta{width:94%}@media screen and (max-width:737px){.cta-drop-down a.newborn-cta,.cta-drop-down a.sale-cta{width:98%;left:1%}}/*# sourceMappingURL=promos/sos/default/css/styles.css.map */
</style>

<!-- dev resources -->
<!-- <link rel="stylesheet" type="text/css" href="https://www.teacollection.com/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.css">
<script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.js"></script>
<script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/jquery.rwdImageMaps.min.js"></script> -->

<!--prod resources -->
<link rel="stylesheet" type="text/css" href="/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.css">
<script src="/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.js"></script>
<script src="/mas_assets/theme/tea_collection/js/jquery.rwdImageMaps.min.js"></script>


<script>
	$(document).ready(function() {
		//CHANGE THE STRING FOR THE ALT FOR ALL PROMO DESKTOP AND MOBILE IMAGES
		// var alt = "Take an extra 20% off newly reduced styles USE CODE: MARCH20";
		// $('.promo-img-alt').attr('alt', alt);

		//function to add alt to area
		var addAltArea = function(map, str) {
			var area = $(map).find('area');
			$(area).each(function(i, val) {

				var href = $(val).attr('href');
				href = href.replace("/", "");
				var cat = href.split("-");
				if (cat[0] == 'baby') {
					cat = cat[0] + " " + cat[1];
				} else if (cat[0].indexOf('#') !== -1) {
					cat = 'see details';
				} else {
					cat = cat[0]
				}

				//add the alt
				$(val).attr('alt', cat + areaAlt + ' ' + str);

			});
		};


		var areaAlt = ' promo banner cta';
		//add the alt to areas
		addAltArea('map[name="map-d"]', 'desktop')
		addAltArea('map[name="map-m"]', 'mobile')

		var path = window.location.href;
		if (path == 'https://www.teacollection.com/' || path == 'https://m.teacollection.com/') {
			$('.sale-promo, .size-promo').css('margin', '0 0 10px 0');
		}

		//responsive image map
		$('img[usemap]').rwdImageMaps();

		//array of urls to hide the banners
		var urlArray = [
			// {
			// 	name: 'homepage',
			// 	url: '/',
			// 	hpBanner: false
			// },
			// {
			// 	name: 'black-friday',
			// 	url: '/black-friday'
			// },
			// {
			// 	name:'sale-page',
			// 	url:'/clothing-sale'
			// },
		];

		//get cookies
		var cookies = document.cookie;
		cookies = cookies.split(';');

		//function to hide or show the banner
		var hideBanners = function() {
			var url = window.location.pathname;

			/*
			$.each(urlArray, function(i, val) {
				if (url == val.url) {
					$('.desktop-promo, .desktop-promo-hp, .mobile-promo, .mobile-promo-hp').hide();
				}
				//black friday subcats hide banner
				else if (url.split('/')[1] == 'black-friday') {
					$('.desktop-promo, .desktop-promo-hp, .mobile-promo, .mobile-promo-hp').hide();
					return false;
				}
			});
			*/

			//only show sale promo on sale page else show other promo
			if (url == '/clothing-sale' || url.split('/')[1] == 'sale') {
				//if not from school days
				$.each(cookies, function(i, val) {
					if (val == ' school-days=true') {
						console.log('school days cookie');
						$('.sale-promo').hide();
						return false;
					} else {
						console.log('no school days cookie')
						$('.sale-promo').show();
					}
				});
			} else {
				$('.size-promo').show();
			}

			//if black friday landing page change dropdown cta urls
			/*
			if (url.split('/')[1] == 'black-friday') {
				//desktop
				if ($(window).width() > 737) {
					var area = $('map[name="map-d"] area');
					$.each(area, function(i, val) {
						var text = $(val).attr('name');
						if (text == 'girl') {
							$(val).attr('href', '/black-friday/girl');
						} else if (text == 'boy') {
							$(val).attr('href', '/black-friday/boy');
						} else if (text == 'baby girl') {
							$(val).attr('href', '/black-friday/baby-girl');
						} else if (text == 'baby boy') {
							$(val).attr('href', '/black-friday/baby-boy');
						} else if (text == 'tween') {
							$(val).attr('href', '/black-friday/tween');
						}
					});
				}
				//mobile
				else {
					var ctas = $('.cta-drop-down a');
					$.each(ctas, function(i, val) {
						var text = $(val).text();
						if (text == 'girl') {
							$(val).attr('href', '/black-friday/girl');
						} else if (text == 'boy') {
							$(val).attr('href', '/black-friday/boy');
						} else if (text == 'baby girl') {
							$(val).attr('href', '/black-friday/baby-girl');
						} else if (text == 'baby boy') {
							$(val).attr('href', '/black-friday/baby-boy');
						} else if (text == 'tween') {
							$(val).attr('href', '/black-friday/tween');
						}
					});
				}
			}*/
		};

		//on page load call hideBanners
		hideBanners();

		//on window resize call hideBanners
		$(window).resize(function() {
			hideBanners();
		});

		// show/hide the fineprint
		$('.sale-promo .see-details').click(function(e) {
			e.preventDefault();
			// desktop
			if ($(window).width() > 737) {
				//show the fineprint in a lightbox
				$('.sale-promo .see-details').fancybox();
			}
			// mobile
			else {
				$('#details-promo').slideToggle();
			}


			//if skinny banner open close it
			var attr = $('#skinny-details-promo').attr('style');
			if (attr !== undefined && attr !== false) {
				$('#skinny-details-promo').slideUp();
			}
		});

		$('#details-promo .close-fancy').click(function(e) {
			e.preventDefault();
			$('#details-promo').slideToggle();
		});

	});
</script>