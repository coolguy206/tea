 
<!-- dev css -->
<!-- <link rel="stylesheet" type="text/css" href="../css/boys-bts.css">   -->
 
<!-- ref --> 
<!-- <img src="http://www.teacollection.com/mas_assets/media/tea_collection/feature-shops/2018/0726/back-to-school/boy/bg-d.png" class="ref" />   -->

<div class="bts"> 
	<h1 class="mobile">Back to School Checklist</h1>
	<header> 
		<!-- desktop -->
		<img src="http://www.teacollection.com/mas_assets/media/tea_collection/feature-shops/2018/0726/back-to-school/boy/header-d.png?nocache=2" class="desktop" alt="Back to School Checklist"/>
		<!-- mobile -->
		<img src="http://www.teacollection.com/mas_assets/media/tea_collection/feature-shops/2018/0726/back-to-school/boy/header-m.png?nocache=2" class="mobile" alt="Back to School Checklist"/>
	</header>
	<nav class="desktop">
		<ul>
			<li><a href="#tops">tops</a></li>
			<li><a href="#bottoms">bottoms</a></li>
			<li><a href="#layering">layering</a></li>
			<li><a href="#shoes">shoes + accessories</a></li>
		</ul>
	</nav>

	<!-- <div class="loading">loading...</div> -->
	
</div>

<!-- toolkit -->
<style>
	include "../css/boys-bts.css"
</style>

<!-- <script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/jquery.rwdImageMaps.min.js"></script> -->

<!-- bx slick development-->
<!-- <script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/slick/slick.min.js"></script>
<link rel="stylesheet" href="https://www.teacollection.com/mas_assets/theme/tea_collection/js/slick/slick.css"/>
<link rel="stylesheet" href="https://www.teacollection.com/mas_assets/theme/tea_collection/js/slick/slick-theme.css"/> -->

<!-- bx slick production-->
<script src="/mas_assets/theme/tea_collection/js/slick/slick.min.js"></script>
<link rel="stylesheet" href="/mas_assets/theme/tea_collection/js/slick/slick.css"/>
<link rel="stylesheet" href="/mas_assets/theme/tea_collection/js/slick/slick-theme.css"/>

<script>
$(document).ready(function() {
	// $('img[usemap]').rwdImageMaps();

	var items = [];

	var tops = {
		className:'c1', 
		name: 'tops', 
		alt: 'Curiosi-tees', 
		skus:[
			{num:'8F22105-442', sizes:'2 to 12'},
			{num:'8F22124-250', sizes:'2 to 16'},
			{num:'8F22127-579', sizes:'2 to 12'},
			{num:'8F22128-486', sizes:'2 to 12'},
			{num:'8F22129-A53', sizes:'2 to 12'},
			{num:'8F22115-E38', sizes:'2 to 16'},
			{num:'8F22115-E39', sizes:'2 to 16'},
			{num:'8F22125-123', sizes:'2 to 16'},
			{num:'8F22130-316', sizes:'2 to 16'},
			{num:'8F22107-405', sizes:'2 to 12'},
		]
	};

	var bottoms = {
		className:'c2', 
		name: 'bottoms', 
		alt: 'Joggers and pants', 
		skus:[
			{num:'8F22202-E41', sizes:'2 to 16'},
			{num:'8F22202-E63', sizes:'2 to 16'},
			{num:'8F22204-405', sizes:'2 to 16'},
			{num:'8F22204-585', sizes:'2 to 16'},
			{num:'8F22203-486', sizes:'2 to 16'},
			{num:'8F23203-A92', sizes:'2 to 16'},
			{num:'8F23203-B37', sizes:'2 to 16'},
			{num:'8F23202-112', sizes:'2 to 16'},
			{num:'8F23202-405', sizes:'2 to 16'},
			{num:'8F22200-111', sizes:'2 to 16'},
		]
	};


	var layering = {
		className:'c3', 
		name: 'layering', 
		alt: 'Lovable layers', 
		skus:[
			{num:'8F22143-E41', sizes:'2 to 12'},
			{num:'8F23100-E76', sizes:'2 to 16'},
			{num:'8F23100-E77', sizes:'2 to 16'},
			{num:'8F22118-E63', sizes:'2 to 16'},
			{num:'8F22119-486', sizes:'2 to 16'},
			{num:'8F22142-585', sizes:'2 to 12'},
			{num:'8F22142-405', sizes:'2 to 12'},
			{num:'8F21100-097', sizes:'XS to L'},
			{num:'8F12127-405', sizes:'2 to 16'},
			{num:'PG68227-BKL', sizes:'XS to XXL'},
		]
	};

	var shoes = {
		className:'c4', 
		name: 'shoes',
		alt: 'Finishing touches',  
		skus:[
			{num:'8F23800-G37', sizes:'OS'},
			{num:'7F22803-403', sizes:'2_3 to 10_12'},
			{num:'7F22800-405', sizes:'2_3 to 10_12'},
			{num:'7F22801-014', sizes:'2_3 to 10_12'},
			{num:'7W22800-154', sizes:'2_3 to 10_12'},
			{num:'7W22801-B55', sizes:'2_3 to 10_12'},
			{num:'VAN6U49-BLK', sizes:'11 to 4Y'},
			{num:'VAN6U4L-YLW', sizes:'11 to 4Y'},
			{num:'VANQUI4-BLK', sizes:'4 to 4Y'},
			{num:'HER1036-BLK', sizes:'OS'}
		]
	};

	items.push(tops, bottoms, layering, shoes);

	// console.log(items);

	//make the pdp
	$.each(items, function(i,val){
		var elem = '<a name="'+ val.name +'"></a><div class="'+ val.className +'"><img src="http://www.teacollection.com/mas_assets/media/tea_collection/feature-shops/2018/0726/back-to-school/boy/'+ val.className +'-d.png?nocache=2" class="desktop" alt="'+ val.alt +'" /><img src="http://www.teacollection.com/mas_assets/media/tea_collection/feature-shops/2018/0726/back-to-school/boy/'+ val.className +'-m.png?nocache=2" class="mobile" alt="'+ val.alt +'" /><ul></ul></div>';

		//make the get call
		$.each(val.skus, function(j,obj){
			var sku = obj.num.split('-')[0];
			var theSize = obj.sizes;
			// console.log(sku, theSize);
			
			$.get('https://www.teacollection.com/product/' + sku, function(data){
				var mpd = $(data).find('#the-mpd').text()
				var json = JSON.parse(mpd);
				// console.log(json.parent_data); 

				//find the matching sku
				$.each(json.parent_data, function(k, pdp){
					var matchSku = pdp.sku;
					// matchSku = matchSku.slice(0,-2);
					// console.log(matchSku);
					
					//DON'T FORGET TO ADJUST THIS!!!!!!!!!!!!!!!!!!!
					if (matchSku.indexOf('VAN6U49-BLK') !== -1 || matchSku.indexOf('8F23800-G37') !== -1 || matchSku.indexOf('VAN6U4L-YLW') !== -1 ){
						matchSku = matchSku.slice(0,-3);
					}
					else if (matchSku.indexOf('7W22800-154') !== -1 || matchSku.indexOf('7W22801-B55') !== -1 || matchSku.indexOf('7F22800-405') !== -1 || matchSku.indexOf('7F22803-403') !== -1 || matchSku.indexOf('7F22801-014') !== -1){
						matchSku = matchSku.slice(0,-4);
					}	
					else {
						matchSku = matchSku.slice(0,-2);
					}

					// console.log(matchSku);
					
					//found the matching sku
					if(matchSku == obj.num){
						// console.log(matchSku, obj);
						// console.log(pdp)
						var thisSku = pdp.sku;
						thisSku = thisSku.split('-')[0];
						var urlModel = pdp.model;
						urlModel = urlModel.replace(/ /g,'-');
						// console.log('the urlModel: ' + urlModel);
						var li = '<li data-num="'+ k +'"><a href="https://www.teacollection.com/product/'+ thisSku +'/'+ urlModel +'.html?nocache=2"><img style="position: absolute; z-index: 999; display:none" class="badges comingsoon-badge" src="https://s.tea-global.net/mas_assets/theme/tea_collection/images/misc/ComingSoonBadge_lrg.gif"><img src="'+ pdp.small_image_url +'" alt="'+ pdp.model +'"><h2><span style="display:none">new</span> '+ pdp.model +'</h2><h3>'+ pdp.retail_price +'</h3><h4>sizes '+ theSize +'  <span class="desktop">â€¢ more colors</span></h4></a></li>';
						$('.'+ val.className + ' ul').append(li);

						//if new arrival show the new span
						if(pdp.is_new_arrival){
							$('.' + val.className + ' ul li[data-num="'+ k +'"] a h2 span').show();
						}
						//if coming soon
						if(pdp.badge == 'comingsoon'){
							$('.' + val.className + ' ul li[data-num="'+ k +'"] a img.badges').show();
						}

						return false;
					}

				});

			});
		});

		$('.bts').append(elem);

	});

	setTimeout(function(){
		if($(window).width() > 737){
			$('.bts .c1 ul, .bts .c2 ul, .bts .c3 ul, .bts .c4 ul, .bts .c5 ul, .bts .c6 ul').slick({
        		infinite:true,
        		slidesToShow: 3,
        		slidesToScroll:1,
        		dots: false,
        		autoplay:true,
        		autoplaySpeed: 2000
    		});
		}
		else {
			$('.bts .c1 ul, .bts .c2 ul, .bts .c3 ul, .bts .c4 ul, .bts .c5 ul, .bts .c6 ul').slick({
        		infinite:true,
        		slidesToShow: 2,
        		slidesToScroll:1,
        		dots: false,
        		autoplay:true,
        		autoplaySpeed: 2000
    		});
		}
		
	},5000);

	//window scroll
	$(window).scroll(function(){
		// console.log($(window).scrollTop());
		if($(window).scrollTop() > 450){
			$('.bts nav').addClass('fixed');
		} else {
			$('.bts nav').removeClass('fixed');
		}
	});

});
</script>