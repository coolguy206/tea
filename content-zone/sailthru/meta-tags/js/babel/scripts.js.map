{"version":3,"sources":["../scripts.js"],"names":["$","document","ready","url","window","location","href","color","split","mpd","text","json","JSON","parse","imgURL","sku","sig","price","api_key","secret","format","undefined","replace","each","parent_data","i","val","thisColor","toLowerCase","large_image_url","theSku","console","log","store_price","Number","slice","theJSON","md5","data","xhr","XMLHttpRequest","withCredentials","addEventListener","readyState","responseText","open","setRequestHeader","send","attr"],"mappings":"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","sourcesContent":["$(document).ready(function() {\r\n  var url = window.location.href;\r\n  var color = url.split('#')[1];\r\n  var mpd = $('#the-mpd').text();\r\n  var json = JSON.parse(mpd);\r\n  var imgURL;\r\n  var sku;\r\n  var sig;\r\n  var price;\r\n  var api_key = `8379ab7deccf4e4aa16a01990e0f4fa2`;\r\n  var secret = `a05b94dd5722b409a097f77b14795d05`;\r\n  var format = `json`;\r\n\r\n\r\n  if (color !== undefined) {\r\n\r\n    color = color.replace(/%20/g, \" \");\r\n\r\n    $.each(json.parent_data, function(i, val) {\r\n      var thisColor = val.color;\r\n      thisColor = thisColor.toLowerCase();\r\n\r\n      if (color == thisColor) {\r\n        imgURL = val.large_image_url;\r\n\r\n        var theSku = val.sku;\r\n        theSku = theSku.split('-');\r\n        theSku = theSku[0] + '-' + theSku[1];\r\n        sku = theSku;\r\n        console.log(theSku);\r\n\r\n        price = val.store_price;\r\n        price = Number(price.slice(1)) * 100;\r\n        //console.log(price);\r\n      }\r\n    });\r\n\r\n    var theJSON = `{\"id\": \"${url}\", \"price\": ${price}, \"keys\": {\"sku\": \"${sku}\"}, \"images\":{\"full\": {\"url\": \"${imgURL}\"}, \"thumb\": {\"url\": \"${imgURL}\"}}}`;\r\n    sig = md5(secret + api_key + format + theJSON);\r\n\r\n    /*\r\n    console.log(`\r\n    api_key: ${api_key}\r\n    sig: ${sig}\r\n    format: ${format}\r\n    \"json\": ${theJSON}\r\n    `);\r\n    */\r\n\r\n    // var settings = {\r\n    //   \"url\": \"https://api.sailthru.com/content\",\r\n    //   \"method\": \"POST\",\r\n    //   \"timeout\": 0,\r\n    //   \"headers\": {\r\n    //     \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n    //   },\r\n    //   \"data\": {\r\n    //     \"api_key\": api_key,\r\n    //     \"sig\": sig,\r\n    //     \"format\": format,\r\n    //     \"json\": theJSON\r\n    //   }\r\n    // };\r\n\r\n    //console.log(settings);\r\n\r\n\r\n    // $.ajax(settings).done(function(response) {\r\n    //   console.log('ajax sailthru content api update complete');\r\n    //   console.log(response);\r\n    // });\r\n\r\n    var data = `api_key=${api_key}&sig=${sig}&format=${format}&json=${theJSON}`;\r\n\r\n    // console.log(data);\r\n\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.withCredentials = true;\r\n\r\n    xhr.addEventListener(\"readystatechange\", function() {\r\n      if (this.readyState === 4) {\r\n        console.log(this.responseText);\r\n      }\r\n    });\r\n\r\n    xhr.open(\"POST\", \"https://api.sailthru.com/content\");\r\n    xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n    xhr.send(data);\r\n\r\n  }\r\n\r\n  //console.log(imgURL);\r\n  if (imgURL !== undefined) {\r\n    $('meta[name=\"sailthru.image.full\"]').attr('content', imgURL);\r\n  }\r\n\r\n  if (sku !== undefined) {\r\n    $('meta[name=\"sku\"]').attr('content', sku);\r\n  }\r\n\r\n  if (price !== undefined) {\r\n    $('meta[name=\"sailthru.price\"]').attr('content', price);\r\n  }\r\n\r\n});"],"file":"scripts.js"}