{"version":3,"sources":["../scripts.js"],"names":["$","document","ready","theURL","window","location","href","id_popular","id_context","id_purchased","id_interest","x","data","parent","jsonArr","JSON","parse","json","length","each","i","val","url","img","image","price","toFixed","title","undefined","replace","indexOf","elem","append","bxSlider","minSlides","maxSlides","slideWidth","moveSlides","controls","nextText","prevText","pager","show","console","log","Sailthru","personalize","sections","id","selector","onSuccess","after","onError","err","vars"],"mappings":"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","sourcesContent":["$(document).ready(function() {\r\n\r\n  var theURL = window.location.href;\r\n  // console.log(theURL);\r\n\r\n  //popular or trending\r\n  var id_popular = '8286a49c-84e0-11ea-91cc-002590d1a41a';\r\n\r\n  //context\r\n  var id_context = `2c3a95ec-a5cb-11ea-87c0-002590d1a2f6`;\r\n\r\n  //viewed or purchased\r\n  var id_purchased = `134796ac-8591-11ea-b811-002590d1a41a`;\r\n\r\n  //interest or prediction\r\n  var id_interest = `dcc9346e-8590-11ea-bec9-002590d1a2f6`;\r\n\r\n\r\n  var x = (data, parent) => {\r\n\r\n    var jsonArr = JSON.parse(data.json);\r\n    // console.log(jsonArr.length);\r\n    // console.log(jsonArr);\r\n\r\n    if (jsonArr.length > 0) {\r\n\r\n      $.each(jsonArr, function(i, val) {\r\n        var url = val.url;\r\n        var img = val.image;\r\n        var price = val.price;\r\n        price = price / 100;\r\n        price = price.toFixed(2);\r\n        var title = val.title;\r\n        if (title !== undefined) {\r\n          title = title.replace(/Tea Collection/, '');\r\n        }\r\n\r\n\r\n        // console.log(url, img, price, title);\r\n        if (url !== undefined && url.indexOf('teashowroom') == -1 && url.indexOf('sandbox.') == -1) {\r\n          // console.log('tea pdp');\r\n          if (img !== undefined && price !== undefined && title !== undefined) {\r\n            var elem = `\r\n                      <li>\r\n                        <a href=\"${url}\">\r\n                          <img src=\"${img}\" alt=\"${title}\">\r\n                        </a>\r\n                        <h3>\r\n                          <a href=\"${url}\">${title}</a>\r\n                        </h3>\r\n                        <p>\r\n                          <span class=\"sale_price\">$${price}</span>\r\n                        </p>\r\n                      </li>`;\r\n\r\n            $(parent + ' .sailthru-list').append(elem);\r\n\r\n          } //end of if(img...)\r\n        } // end of if(url...)\r\n\r\n      }); //end of $.each\r\n\r\n      $(parent + ' .sailthru-list').bxSlider({\r\n        minSlides: 1,\r\n        maxSlides: 4,\r\n        slideWidth: 300,\r\n        moveSlides: 1,\r\n        controls: true,\r\n        nextText: '<span class=\"fas fa-chevron-right\"></span>',\r\n        prevText: '<span class=\"fas fa-chevron-left\"></span>',\r\n        pager: false\r\n      });\r\n\r\n      $(parent + ' h2.sailthru-h2').show();\r\n\r\n    } //end of if jsonArr.length > 0\r\n    else {\r\n      console.log('no pdps returned');\r\n      // console.log(data);\r\n    }\r\n\r\n\r\n  };\r\n\r\n\r\n  Sailthru.personalize({\r\n\r\n    sections: [\r\n      /*\r\n      {\r\n        id: id_popular,\r\n        selector: '.sailthru-popular .sailthru-list',\r\n        onSuccess: function(data) {\r\n          console.log('sailthru recommended pdps for popular & trending');\r\n          console.log(data);\r\n          x(data, '.sailthru-popular');\r\n          $('#pdp-item-suggestions').after($('.sailthru-pdps'));\r\n        },\r\n        onError: function(err) {\r\n          console.log('sailthru recommended pdps popular & trending error');\r\n          console.log(err);\r\n        }\r\n      },\r\n      */\r\n\r\n      {\r\n        id: id_context,\r\n        selector: '.sailthru-context .sailthru-list',\r\n        onSuccess: function(data) {\r\n          // console.log('sailthru recommended pdps for context');\r\n          // console.log(data);\r\n          x(data, '.sailthru-context');\r\n          $('#pdp-item-suggestions').after($('.sailthru-pdps'));\r\n        },\r\n        onError: function(err) {\r\n          console.log('sailthru recommended pdps context error');\r\n          console.log(err);\r\n        }\r\n      },\r\n\r\n      /*\r\n      {\r\n        id: id_purchased,\r\n        selector: '.sailthru-purchased .sailthru-list',\r\n        onSuccess: function(data) {\r\n          console.log('sailthru recommended pdps for purchased & viewed');\r\n          console.log(data);\r\n          x(data, '.sailthru-purchased');\r\n        },\r\n        onError: function(err) {\r\n          console.log('sailthru recommended pdps purchased & viewed error');\r\n          console.log(err);\r\n        }\r\n      },\r\n      {\r\n        id: id_interest,\r\n        selector: '.sailthru-interest .sailthru-list',\r\n        onSuccess: function(data) {\r\n          console.log('sailthru recommended pdps for interest & prediction');\r\n          console.log(data);\r\n          x(data, '.sailthru-interest');\r\n        },\r\n        onError: function(err) {\r\n          console.log('sailthru recommended pdps interest & prediction error');\r\n          console.log(err);\r\n        }\r\n      },\r\n      */\r\n    ],\r\n    vars: {\r\n      \"context_key\": theURL\r\n    },\r\n\r\n  });\r\n\r\n});"],"file":"scripts.js"}