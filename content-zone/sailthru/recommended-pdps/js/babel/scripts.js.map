{"version":3,"sources":["../scripts.js"],"names":["theURL","window","location","href","id_popular","id_context","id_purchased","id_interest","x","data","parent","jsonArr","JSON","parse","json","length","$","each","i","val","url","img","image","price","toFixed","title","undefined","replace","originalPrice","vars","variants","original_price_column","Number","priceElem","indexOf","elem","append","bxSlider","minSlides","maxSlides","autoplay","autoplaySpeed","slideWidth","moveSlides","controls","nextText","prevText","pager","show","console","log","Sailthru","personalize","sections","id","selector","onSuccess","after","onError","err"],"mappings":"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","sourcesContent":["var theURL = window.location.href;\r\n// console.log(theURL);\r\n\r\n//popular or trending\r\nvar id_popular = '8286a49c-84e0-11ea-91cc-002590d1a41a';\r\n\r\n//context\r\nvar id_context = `2c3a95ec-a5cb-11ea-87c0-002590d1a2f6`;\r\n\r\n//viewed or purchased\r\nvar id_purchased = `134796ac-8591-11ea-b811-002590d1a41a`;\r\n\r\n//interest or prediction\r\nvar id_interest = `dcc9346e-8590-11ea-bec9-002590d1a2f6`;\r\n\r\nvar x = (data, parent) => {\r\n  var jsonArr = JSON.parse(data.json);\r\n  // console.log(jsonArr.length);\r\n  // console.log(jsonArr);\r\n  if (jsonArr.length > 0) {\r\n    $.each(jsonArr, function(i, val) {\r\n      var url = val.url;\r\n      var img = val.image;\r\n      var price = val.price;\r\n      price = price / 100;\r\n      price = price.toFixed(2);\r\n      var title = val.title;\r\n      if (title !== undefined) {\r\n        title = title.replace(/Tea Collection/, '');\r\n      }\r\n      var originalPrice = ``;\r\n      var vars = val.vars;\r\n      if (vars !== undefined) {\r\n        originalPrice = vars.variants[0].original_price_column;\r\n        originalPrice = originalPrice.replace(/ USD/g, '');\r\n        originalPrice = Number(originalPrice).toFixed(2);\r\n        //console.log(originalPrice);\r\n      }\r\n\r\n      var priceElem = ``;\r\n      if (originalPrice !== ``) {\r\n        if (originalPrice !== price) {\r\n          priceElem = `<p><strike>$${originalPrice}</strike> <span class=\"sale_price\">$${price}</span></p>`;\r\n        } else {\r\n          priceElem = `<p>$${price}</p>`;\r\n        }\r\n      } else {\r\n        priceElem = `<p>$${price}</p>`;\r\n      }\r\n\r\n      // console.log(url, img, price, title);\r\n      if (url !== undefined && url.indexOf('teashowroom') == -1 && url.indexOf('sandbox.') == -1) {\r\n        // console.log('tea pdp');\r\n        if (img !== undefined && price !== undefined && title !== undefined) {\r\n          var elem = `\r\n            <li>\r\n              <a href=\"${url}\">\r\n                <img src=\"${img}\" alt=\"${title}\">\r\n              </a>\r\n              <h3>\r\n                <a href=\"${url}\">${title}</a>\r\n              </h3>\r\n              ${priceElem}\r\n            </li>`;\r\n          $(parent + ' .sailthru-list').append(elem);\r\n        } //end of if(img...)\r\n      } // end of if(url...)\r\n    }); //end of $.each\r\n\r\n    $(parent + ' .sailthru-list').bxSlider({\r\n      minSlides: 1,\r\n      maxSlides: 4,\r\n      autoplay: true,\r\n      autoplaySpeed: 2000,\r\n      slideWidth: 300,\r\n      moveSlides: 1,\r\n      controls: true,\r\n      nextText: '<span class=\"fas fa-chevron-right\"></span>',\r\n      prevText: '<span class=\"fas fa-chevron-left\"></span>',\r\n      pager: false\r\n    });\r\n    $(parent + ' h2.sailthru-h2').show();\r\n  } //end of if jsonArr.length > 0\r\n  else {\r\n    console.log('no pdps returned');\r\n    // console.log(data);\r\n  }\r\n};\r\n\r\nSailthru.personalize({\r\n  sections: [\r\n    /*\r\n    {\r\n      id: id_popular,\r\n      selector: '.sailthru-popular .sailthru-list',\r\n      onSuccess: function(data) {\r\n        console.log('sailthru recommended pdps for popular & trending');\r\n        console.log(data);\r\n        x(data, '.sailthru-popular');\r\n        $('#pdp-item-suggestions').after($('.sailthru-pdps'));\r\n      },\r\n      onError: function(err) {\r\n        console.log('sailthru recommended pdps popular & trending error');\r\n        console.log(err);\r\n      }\r\n    },\r\n    */\r\n    {\r\n      id: id_context,\r\n      selector: '.sailthru-context .sailthru-list',\r\n      onSuccess: function(data) {\r\n        // console.log('sailthru recommended pdps for context');\r\n        // console.log(data);\r\n        x(data, '.sailthru-context');\r\n        $('#pdp-item-suggestions').after($('.sailthru-pdps'));\r\n      },\r\n      onError: function(err) {\r\n        console.log('sailthru recommended pdps context error');\r\n        console.log(err);\r\n      }\r\n    },\r\n    /*\r\n    {\r\n      id: id_purchased,\r\n      selector: '.sailthru-purchased .sailthru-list',\r\n      onSuccess: function(data) {\r\n        console.log('sailthru recommended pdps for purchased & viewed');\r\n        console.log(data);\r\n        x(data, '.sailthru-purchased');\r\n      },\r\n      onError: function(err) {\r\n        console.log('sailthru recommended pdps purchased & viewed error');\r\n        console.log(err);\r\n      }\r\n    },\r\n    {\r\n      id: id_interest,\r\n      selector: '.sailthru-interest .sailthru-list',\r\n      onSuccess: function(data) {\r\n        console.log('sailthru recommended pdps for interest & prediction');\r\n        console.log(data);\r\n        x(data, '.sailthru-interest');\r\n      },\r\n      onError: function(err) {\r\n        console.log('sailthru recommended pdps interest & prediction error');\r\n        console.log(err);\r\n      }\r\n    },\r\n    */\r\n  ],\r\n  vars: {\r\n    \"context_key\": theURL\r\n  },\r\n});"],"file":"scripts.js"}