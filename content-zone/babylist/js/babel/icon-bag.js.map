{"version":3,"sources":["../icon-bag.js"],"names":["$","document","ready","getBag","find","remove","prepend","setTimeout","get","data","items","bagItems","each","i","val","qty","innerText","replace","Number","console","log","attr","text","css","removeAttr","pdpUrl","href","img","childNodes","src","title","price","color","edit","editUrl","split","size","rmUrl","elem","append","subtotal","fs","totalElem","focusout","closest","prev","num","id","isNaN","bag","before","focus","post","click","e","preventDefault","url","signIn","freeShip","length","emptyElem","hover","show","hide","trigger","on"],"mappings":"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","sourcesContent":["$(document).ready(function(){\n\nvar getBag = function(){\n\n\t//empty the bag\n\t$('.the-shopping-cart-items').find('li').remove();\n\t$('.the-shopping-cart-items').find('.subtotal').remove();\n\n\t//updating message\n\t$('.the-shopping-cart-items .form').prepend('<span class=\"updating-cart-message\" style=\"display: block; text-align: center; padding: 10px 0; font-size: 15px;\">Updating shopping cart...</span>');\nsetTimeout(function(){\n\t$.get('https://www.teacollection.com/?page=cart', function(data){\n\t\tvar items = $(data).find('section.item');\n\t\tvar bagItems = 0;\n\t\t//get the total number of items in bag\n\t\t$.each(items, function(i,val){\n\t\t\tvar qty = $(val).find('dt')[2].innerText;\n\t\t\tqty = qty.replace('Quantity: ', '');\n\t\t\tqty = Number(qty);\n\t\t\tbagItems += qty;\n\t\t});\n\n\t\tconsole.log(bagItems);\n\n\t\tif(bagItems > 0){\n\t\t\tconsole.log('you got something in your bag');\n\n\t\t\t//change the bag icon\n\t\t\t$('.view-cart > img').attr('src','https://www.teacollection.com/mas_assets/theme/tea_collection/images/header/nav/bag-icon-filled.png');\n\t\t\t//add the number\n\t\t\t$('.view-cart > span').text(bagItems);\n\n\t\t\t//adjust css for single digits\n\t\t\tif(bagItems < 10){\n\t\t\t\t$('.view-cart > span').css('left', '5px');\n\t\t\t} \n\t\t\t//remove css for double digits\n\t\t\telse if(bagItems > 9 && bagItems < 100){\n\t\t\t\t$('.view-cart > span').removeAttr('style');\n\t\t\t}\n\t\t\t//adjust css for triple digits\n\t\t\telse if (bagItems > 99){\n\t\t\t\t$('.view-cart > span').css('left', '1px');\n\t\t\t}\n\n\t\t\t$.each(items, function(i,val){\n\t\t\t\tvar pdpUrl = $(val).find('a')[0].href;\n\t\t\t\tvar img = $(val).find('a')[0].childNodes[0].src;\n\t\t\t\t// console.log(pdpUrl, img);\n\t\t\t\tvar title = $(val).find('h1').text();\n\t\t\t\tvar price = $(val).find('.regular-price').text();\n\t\t\t\t// console.log(title, price);\n\t\t\t\tvar color = $(val).find('dd').text();\n\t\t\t\tvar qty = $(val).find('dt')[2].innerText;\n\t\t\t\tconsole.log(qty);\n\t\t\t\tqty = qty.replace(' Quantity: ', '');\n\t\t\t\t// console.log(color, qty);\n\t\t\t\tvar edit = $(val).find('.ajax-cart-edit').attr('href');\n\t\t\t\t// var editUrl = 'https://www.teacollection.com/?page=cart' + edit;\n\t\t\t\tvar editUrl = edit;\n\t\t\t\tedit = edit.split('/')[0];\n\t\t\t\tedit = edit.replace('#','');\n\t\t\t\tvar size = $(val).find('dt')[1].innerText;\n\t\t\t\tsize = size.replace('Size: ', '');\n\t\t\t\tvar rmUrl = $(val).find('.ajax-cart-remove')[0].href;\n\t\t\t\t// console.log(edit, size, rmUrl);\n\n\t\t\t\tvar elem = '<li><div class=\"left\"><a href=\"'+ pdpUrl +'\"><img src=\"'+ img +'\" alt=\"'+ title +'\"></a></div><div class=\"right\"><span class=\"bag-title\"><a href=\"'+ pdpUrl +'\">'+ title +'</a></span><span class=\"bag-price\">'+price+'</span><span class=\"bag-color\">color: '+ color +'</span><span class=\"bag-size\">size: '+ size +'</span><span class=\"bag-qty\">quantity: '+ qty +'</span><span class=\"bag-links\"><a href=\"'+ editUrl +'\" class=\"bag-edit ajax-cart-edit\">edit</a> | <a href=\"'+ rmUrl +'\" class=\"bag-remove\">remove</a></div></span></li>';\n\t\t\t\t$('.the-shopping-cart-items .form ul').append(elem);\n\t\t\t});\n\n\t\t\t//the total\n\t\t\t//get the subtotal, away from free shipping, and checkout url\n\t\t\tvar subtotal = $(data).find('footer').find('h3')[0].innerText;\n\t\t\tvar fs = $(data).find('footer').find('h3')[1].innerText;\n\t\t\t// console.log(subtotal, fs);\n\t\t\t// var checkout = $(data).find('footer').find('.ajax-checkout-button');\n\n\t\t\tvar totalElem =  '<div class=\"subtotal\"><span class=\"sub-title\">shopping bag</span><span>'+ subtotal +'</span><span>'+ fs +'</span><a href=\"/?page=checkout\" class=\"sub-checkout\">checkout</a><a href=\"/?page=cart\" class=\"sub-bag-details\">view bag details</a></div>';\n\n\t\t\t// console.log(totalElem);\n\n\t\t\t$('.the-shopping-cart-items .form').append(totalElem);\n\n\t\t\t//edit quantity\n\t\t\t$('.the-qty').focusout(function(){\n\t\t\t\t\n\t\t\t\t$(this).closest('.bag-qty').prev('.bag-error-number').remove();\n\n\t\t\t\tconsole.log('changed input.the-qty'); \n\t\t\t\tvar num = Number($(this).val());\n\t\t\t\tconsole.log(num);\n\t\t\t\tvar id = $(this).attr('name');\n\t\t\t\t//not a number\n\t\t\t\tif(isNaN(num) || num == ''){\n\t\t\t\t\tvar bag = $(this).closest('.bag-qty');\n\t\t\t\t\t$(bag).before('<span class=\"bag-error-number\" style=\"color:red;\">Please enter a valid number</span>')\n\t\t\t\t\t$(this).focus()\n\t\t\t\t}\n\t\t\t\t//is a number\n\t\t\t\telse {\n\t\t\t\t\t//remove error message\n\t\t\t\t\t$(this).closest('.bag-error-number').remove();\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(id);\n\t\t\t\t\t$.post('https://www.teacollection.com/?page=cart&action=update&qty['+ id +']=' + num, function(data){\n\t\t\t\t\t\tconsole.log('success on updating the cart from monetate');\n\t\t\t\t\t\tgetBag();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\n\t\t\t//remove bag click\n\t\t\t$('.bag-remove').click(function(e){ \n\t\t\t\te.preventDefault();\n\t\t\t\tvar url = $(this).attr('href');\n\t\t\t\tconsole.log('bag removed clicked ', url);\n\t\t\t\t$.post(url, function(data){\n\t\t\t\t\tconsole.log('removed successful from monetate');\n\t\t\t\t\tgetBag();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('.bag-edit').click(function(){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t$('#product-detail-page.quick-view .add-to-bag').click(function(e){\n\t\t\t\t\t\t//console.log('add to bag monetate dynamic');\n\t\t\t\t\t\tgetBag();\n\t\t\t\t\t});\n\t\t\t\t},1000);\n\t\t\t});\n\n\t\t}\n\t\t// else no items in bag\n\t\telse {\n\t\t\tconsole.log('nothing in bag');\n\n\t\t\t//change the bag icon\n\t\t\t$('.view-cart > img').attr('src','https://www.teacollection.com/mas_assets/theme/tea_collection/images/header/nav/bag-icon-empty.png');\n\n\t\t\tvar signIn = $('#top-bar').find('ul.clearfix > li')[1].id;\n\n\t\t\t//get the free shipping\n\t\t\tvar freeShip = $('#free-shipping-container p:last-of-type').text().split(' ');\n\t\t\tfreeShip = freeShip[freeShip.length - 1];\n\n\t\t\tvar emptyElem;\n\t\n\t\t\t//signed in\n\t\t\tif(signIn == 'welcome-member'){\n\t\t\t\tconsole.log('signed in from shopping bag');\n\t\t\t\temptyElem =  '<div class=\"subtotal\"><span class=\"sub-title\">shopping bag</span><span>Your shopping bag is empty</span><span>Free shipping on orders '+ freeShip +'+</span><a href=\"/\" class=\"sub-checkout\">start shopping</a><a href=\"/?page=wishlists\" class=\"sub-bag-details\">view wishlists</a></div>';\n\t\t\t}\n\t\t\t//signed out\n\t\t\telse {\n\t\t\t\tconsole.log('signed out from shoppping bag');\n\t\t\t\temptyElem =  '<div class=\"subtotal\"><span class=\"sub-title\">shopping bag</span><span>Your shopping bag is empty</span><span>Free shipping on orders '+ freeShip +'+</span><a href=\"/\" class=\"sub-checkout\">start shopping</a></div>';\n\t\t\t}\n\n\t\t\t// console.log(totalElem);\n\n\t\t\t$('.the-shopping-cart-items .form').append(emptyElem);\n\t\t}\n\n\t\t//remove updating message\n\t\t$('.updating-cart-message').remove();\n\t\t\n\t});\n\n}, 500);\n\n};\n\n\n//toggle the cart\n// $('#new-icons ul li.the-bag-icon').click(function(e){\n// \t//e.preventDefault()\n// \tif(e.target.className == 'toggle'){\n// \t\t$(this).find('.the-shopping-cart-items').toggle();\n// \t}\n// });\n\n\n//hover show the cart\n$('#new-icons ul li.the-bag-icon').hover(function(e){\n\t$(this).find('.the-shopping-cart-items').show();\n}, function(){\n\t$(this).find('.the-shopping-cart-items').hide();\n});\n\ngetBag();\n\n//on add to bag call getBag()\n$('.pdp-item-details-attributes button.add-to-bag').click(function(){\n\tconsole.log('added to bag from monetate');\n\t//trigge the hover\n\t$('.view-cart').trigger('mouseenter');\n\n\t// setTimeout(function(){\n\t// \tlocation.reload();\n\t// },1000);\n\n\n\tgetBag();\n\n\t\n});\n\n//dynamically added elements with clicks\n// $(\".gift-shop-container, .girls-clothing-cat\").on('DOMNodeInserted', function(e){\n\t// console.log(e);\n\t// $('.drop .cta').click(function(e){\n\t// \tconsole.log('added to bag from monetate');\n\t\t// console.log($(this));\n\t\t// console.log(e);\n\n\t\t//trigge the hover\n\t\t// $('.view-cart').trigger('mouseenter');\n\n\t\t// setTimeout(function(){\n\t\t// \tlocation.reload();\n\t\t// },1000);\n\n\t\t// getBag();\n// \t});\n// });\n\n//dynamically added elements with clicks\n$(\".gift-shop-container .gift-it, .girls-clothing-cat .gift-it\").on('click', function(e){\n\t// console.log('clicked gift-it')\n\tsetTimeout(function(){\n\t\t$('.drop .cta').click(function(e){\n\t\t\t// console.log('add to bag monetate dynamic');\n\t\t\tgetBag();\n\t\t});\n\t},1000);\t\n});\n\n//dynamically added elements with clicks on category pages\n$('.item').on('mouseenter', function(){\n\t$(\".quickview-overlay.active h2 a\").on('click', function(e){\n\t\t// console.log('clicked gift-it')\n\t\tsetTimeout(function(){\n\t\t\t$('.add-to-bag').click(function(e){\n\t\t\t\t// console.log('add to bag monetate dynamic cats');\n\t\t\t\tgetBag();\n\t\t\t});\n\t\t},1000);\t\n\t});\n});\n\n\n});"],"file":"icon-bag.js"}