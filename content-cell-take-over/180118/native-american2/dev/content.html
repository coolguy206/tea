<!--toolkit -->

<style>
	include "../css/styles.css"
</style>

<!-- dev styles -->
<!-- <link rel="stylesheet" type="text/css" href="../css/styles.css">  -->

<div class="top">
	<!-- ref -->
	<!-- <img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/bg-ref.jpg" class="ref" /> -->

	<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/top-d.jpg" alt="native tribes x tea collection This year, we've collaborated with indigenous artists all over the country. Our journey begins in the south, where sunshine rules." class="desktop" />

	<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/top-m.jpg" alt="native tribes x tea collection This year, we've collaborated with indigenous artists all over the country. Our journey begins in the south, where sunshine rules." class="mobile" />
</div>

<div class="gift-shop-container"> 
	<!-- cell 1 -->
	<div class="c1 cell">
		<!-- desktop -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c1-d.jpg" alt="Pottery from the Museum of Indian Arts and Culture in New Mexico inspired authentic Pueblo patterns and one pretty fun fish tee." usemap="#c1-d" class="desktop"/>

		<map name="c1-d">
			<area class="gift-it"  alt="" title="" href="#" shape="rect" coords="520,460,678,500" style="outline:none;" target="_self" />
			<area  alt="" title="" href="http://blog.teacollection.com/miac-new-mexico" shape="rect" coords="687,459,840,500" style="outline:none;" target="_blank" />
		</map>

		<!-- mobile -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c1-m-v2.jpg" alt="Pottery from the Museum of Indian Arts and Culture in New Mexico inspired authentic Pueblo patterns and one pretty fun fish tee." usemap="#c1-m" class="mobile"/>

		<map name="c1-m">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,751,365,1077" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/miac-new-mexico" shape="rect" coords="387,751,750,1077" style="outline:none;" target="_blank"     />
		</map>

	</div>

	<!-- cell 2 -->
	<div class="c2 cell">
		<!-- desktop -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c2-d.jpg" alt="Gregory Lomayesva's imaginative Hopi folk art translates perfectly to legendary tees with an empowering message." usemap="#c2-d" class="desktop"/>

		<map name="c2-d">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,461,150,500" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/gregory-lomayesva" shape="rect" coords="164,460,320,500" style="outline:none;" target="_blank"     />
		</map>

		<!-- mobile -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c2-m-v2.jpg" alt="Gregory Lomayesva's imaginative Hopi folk art translates perfectly to legendary tees with an empowering message." usemap="#c2-m" class="mobile"/>

		<map name="c2-m">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,750,364,1039" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/gregory-lomayesva" shape="rect" coords="390,751,750,1039" style="outline:none;" target="_blank"     />
		</map>
	</div>

	<!-- cell 3 -->
	<div class="c3 cell">
		<!-- desktop -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c3-d.jpg" alt="Gregory Lomayesva's imaginative Hopi folk art translates perfectly to legendary tees with an empowering message." usemap="#c3-d" class="desktop"/>

		<map name="c3-d">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="520,459,678,500" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/martha-berry" shape="rect" coords="687,459,840,500" style="outline:none;" target="_blank"     />
		</map>

		<!-- mobile -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c3-m-v2.jpg" alt="Gregory Lomayesva's imaginative Hopi folk art translates perfectly to legendary tees with an empowering message." usemap="#c3-m" class="mobile"/>

		<map name="c3-m">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,751,366,1077" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/martha-berry" shape="rect" coords="393,751,750,1077" style="outline:none;" target="_blank"     />
		</map>
	</div>


	<!-- cell 4 -->
	<div class="c4 cell">
		<!-- desktop -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c4-d.jpg" alt="Benjamin Haro, Jr. transforms Shawnee and Seminole folklore into modern graphic spirit animals." usemap="#c4-d" class="desktop"/>

		<map name="c4-d">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,440,152,484" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/benjamin-harjo-jr" shape="rect" coords="164,440,318,484" style="outline:none;" target="_blank"     />
		</map>

		<!-- mobile -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c4-m-v2.jpg" alt="Benjamin Haro, Jr. transforms Shawnee and Seminole folklore into modern graphic spirit animals." usemap="#c4-m" class="mobile"/>

		<map name="c4-m">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,749,366,1039" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/benjamin-harjo-jr" shape="rect" coords="390,751,750,1039" style="outline:none;" target="_blank"     />
		</map>
	</div>

	<!-- cell 5 -->
	<div class="c5 cell">
		<!-- desktop -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c5-d.jpg" alt="Jessica Osceola’s grandma taught her how to sew
her tribe’s traditional patchwork. We worked with Jessica to adapt classic Seminole signals into a bold playtime print." usemap="#c5-d" class="desktop"/>

		<map name="c5-d">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="520,452,678,500" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/jessica-osceola" shape="rect" coords="688,450,840,500" style="outline:none;" target="_blank"     />
		</map>

		<!-- mobile -->
		<img src="/mas_assets/theme/tea_collection/images/categories/headers/180118/native-american/c5-m-v2.jpg" alt="Jessica Osceola’s grandma taught her how to sew
her tribe’s traditional patchwork. We worked with Jessica to adapt classic Seminole signals into a bold playtime print." usemap="#c5-m" class="mobile"/>

		<map name="c5-m">
			<area  class="gift-it" alt="" title="" href="#" shape="rect" coords="0,749,363,1077" style="outline:none;" target="_self"     />
			<area  alt="" title="" href="http://blog.teacollection.com/jessica-osceola" shape="rect" coords="387,750,750,1077" style="outline:none;" target="_blank"     />
		</map>
	</div>

</div>


<!-- dev -->
<!-- <link rel="stylesheet" type="text/css" href="https://www.teacollection.com/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.css">
<script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.js"></script> -->
<!-- <script src="https://www.teacollection.com/mas_assets/theme/tea_collection/js/jquery.rwdImageMaps.min.js"></script> -->

<!-- prod -->
<!-- <link rel="stylesheet" type="text/css" href="/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.css">
<script src="/mas_assets/theme/tea_collection/js/fancybox_2.0/jquery.fancybox.js"></script> -->
<script src="/mas_assets/theme/tea_collection/js/jquery.rwdImageMaps.min.js"></script>

<script>
	$(document).ready(function(){
		jQuery('img[usemap]').rwdImageMaps();

		/*************************************************************************************/

		//dev image src
		// var imgs = $('.top img, .gift-shop-container img');
		// $.each(imgs, function(i,val){
		// 	var src = $(val).attr('src');
		// 	var newSrc = 'https://www.teacollection.com' + src;
		// 	$(val).attr('src', newSrc)
		// });

		//desktop fineprint
		// if($(window).width()>737){
		// 	//lightbox for fineprint
		// 	$('#pj-fineprint').fancybox({
		// 		afterClose: function(){
		// 			$('.fancybox-overlay').remove();
		// 		}
		// 	});
		// }

		//mobile fineprint
		// if($(window).width()<737){
		// 	// slide toggle the fineprint
		// 	$('#pj-fineprint').click(function(e){
		// 		e.preventDefault();
		// 		$('#pj-details').slideToggle();
		// 		var pos = $(this).offset();
		// 		$('.pj-container').css({position:'relative', top: pos.top - 500});
		// 	});

		// 	$('.close-pj').click(function(e){
		// 		e.preventDefault();
		// 		$('#pj-details').slideToggle();
		// 	});
		// }
		

		var bundle = [];

		var outfit = function(sku1, sku2, sku3, sku4, sku5, sku6, sku7, sku8, sku9, sku10){
			var obj = {};
			obj.skus = [sku1,sku2,sku3,sku4,sku5,sku6, sku7, sku8, sku9, sku10];
			bundle.push(obj)
		};

		// PROD BUNDLE
		// outfit 1
		outfit('8S12307R-E47', '8S12307R-E28', '8S12307B-E47', '8S22111R-G18', '8S23600R-E96', '8S42503B-G18', '8S32901B-C05');
		
		// outfit 2
		outfit('8S12116R-C05', '8S22110R-010');
		
		// outfit 3
		// outfit('8S12309R-429', '8S22106R-710', '8S32100B-724', '8S32100B-061', '8S32502B-429');
		outfit('8S12309R-429', '8S22106R-710', '8S32502B-429');
		
		// outfit 4
		outfit('8S12115R-061', '8S22107R-220', '8S42100B-223');
		
		// outfit 5
		outfit('8S82301K-F47', '8S12308R-F47', '8S12307B-F47', '8S22115R-E16', '8S12207R-F47', '8S32203B-F47');
		

		/*************************************************************************************/

		// DEV BUNDLE
		//outfit 1
		// outfit('7F13305-001', '7F12338-014', '7F12218-633', '7F12322-577', '7F12319-948', '6F12200-633', '7F12336-324');

		// outfit 2
		// outfit('7F12336-324', '7F12335-936');

		// outfit 3
		// outfit('7F12335-936', '7F12336-324', '7F12338-014', '7F12218-633');

		// outfit 4
		// outfit('7F13305-001', '7F12338-014', '7F12218-633');

		// outfit 5
		// outfit('7F12322-577', '7F12319-948', '6F12200-633');
		
		// outfit 6
		// outfit('7F12332-474', '', '');

		// console.log(bundle);

		//add bundle to divs
		$.each(bundle, function(i,val){
			var cell = i + 1;
			var skus = val.skus;
			$.each(skus, function(j,arr){
				if(arr !== ""){
					var num = j + 1;
					var data = 'data-sku-' + num;
					$('.c' + cell).attr(data, arr);
				}
			});
		});

		//sold out function
		var soldOut = function(elem, i){
			//if sold out
			if($(elem).length < 2){
				// console.log('sold out');
				//add the sold out badge
				$('.li-' + i + '> div').prepend('<img src="https://s.tea-global.net/mas_assets/theme/tea_collection/images/misc/SoldOutBadge_lrg.gif" alt="sold out" class="sold-out">');
				//hide the dropdown and add to bag
				$('.li-' + i).find('.sizes-container').hide();
				$('.li-' + i).find('select').hide();
				$('.li-' + i).find('.cta').hide();
			}
		};

		//gift-it click
		$('.gift-it').click(function(e){
			e.preventDefault();

			//remove any .drop on the page
			$('.drop').remove();

			//variables
			var div = $(this).closest('.cell');
			var sku1 = $(div).attr('data-sku-1');
			var sku2 = $(div).attr('data-sku-2');
			var sku3 = $(div).attr('data-sku-3');
			var sku4 = $(div).attr('data-sku-4');
			var sku5 = $(div).attr('data-sku-5');
			var sku6 = $(div).attr('data-sku-6');
			var sku7 = $(div).attr('data-sku-7');
			var sku8 = $(div).attr('data-sku-8');
			var sku9 = $(div).attr('data-sku-9');
			var sku10 = $(div).attr('data-sku-10');

			var skus = [sku1, sku2, sku3, sku4, sku5, sku6, sku7, sku8, sku9, sku10];

			// close svg element
			var closeSvg = '<span class="close"><svg width="15" height="15" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>X to close</title><desc>Created using Figma</desc><g id="Canvas" transform="translate(4130 14276)"><g id="X to close"><g id="Rectangle"><use xlink:href="#path0_fill" transform="matrix(-0.707974 -0.706238 0.706284 -0.707928 -4129.23 -14261)" fill="#666666"/></g><g id="Rectangle"><use xlink:href="#path1_fill" transform="matrix(-0.706284 0.707928 -0.707974 -0.706238 -4115 -14261.8)" fill="#666666"/></g></g></g><defs><path id="path0_fill" d="M 0 0L 1.05949 0L 1.05949 20.1303L 0 20.1303L 0 0Z"/><path id="path1_fill" d="M 0 0L 1.05949 0L 1.05949 20.1303L 0 20.1303L 0 0Z"/></defs></svg></span>'; 

			//add the .drop element
			$(div).after('<div class="drop"><ul><li class="close-svg">'+closeSvg+'</li><li class="loading" style="width:100% !important"><h3>LOADING...</h3></li></ul></div>');

			//hide the close icon
			$('.close-svg').hide();

			//.close click
			$('.close').click(function(){
				$('.drop').remove();
			});

			//console.log(skus);

			//get the items
			$.each(skus, function(i,val){
				if(val !== undefined){
					var sku = val.split('-')[0];
					var skuColor = val.split('-')[1];

					$.get('https://www.teacollection.com/product/' + sku, function(data){
						// console.log(data);

						
						var theData = $(data).find('#the-mpd').text();
						var jsonData = JSON.parse(theData);
						// console.log(jsonData);

						var id = Object.keys(jsonData.parent_data)[0];
						// console.log(id);

						var title = jsonData.parent_data[id].model;
						var price = jsonData.parent_data[id].store_price;
						var imgSrc;

						//the url
						var pdp = title.toLowerCase().replace(/ /g, '-');
						var pdpUrl;
						
						
						//get the sizes
						var sizesArray = [];
						//loop through jsonData
						$.each(jsonData.parent_data, function(j,obj){
							
							var objSku = obj.sku.split('-')[1];
							// console.log(skuColor, objSku);

							//if matches color num
							if(skuColor == objSku){
								// console.log('match', skuColor, objSku, obj);

								var colorName = obj.color;
								colorName = colorName.toLowerCase();
								pdpUrl = '/product/' + sku + '/' + pdp + '.html?nocache=1#' + colorName;

								//get the image src
								imgSrc = obj.small_image_url;
								// console.log(j,obj,imgSrc);

								//if store_quantity > 0
								if(obj.store_quantity > 0){
									//push to sizesArray
									sizesArray.push(obj.size);
								}
							}
						});

						//sort the sizesArray
						sizesArray.sort(function(a, b){return a-b});
						// console.log(sizesArray);

						var dropdownIcon = '<svg width="10" height="6" viewBox="0 0 10 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Vector</title><desc>Created using Figma</desc><g id="Canvas" transform="translate(371 14198)"><g id="Vector"><use xlink:href="#path0_fill" transform="translate(-371 -14198)" fill="#999999"/></g></g><defs><path id="path0_fill" d="M 8.98305 0L 5.08475 3.83333L 1.01695 0L 0 1L 5.08475 6L 10 1L 8.98305 0Z"/></defs></svg>';

						//desktop
						if($(window).width() > 737){
							var li = '<li class="li-'+i+'"><div><a href="'+ pdpUrl +'" target="_blank"><img src="'+imgSrc+'" alt="'+title+'"/></a><h3><span class="title"><a href="'+ pdpUrl +'" target="_blank">'+title+'</a></span><br><span class="price">'+price+'</span></h3><div class="sizes-container sizes-wrap-'+i+'"><ul class="sizes-'+i+'"><li>size</li></ul></div><a href="#" class="cta add-to-bag-'+i+' disabled">add to bag</a><h4 class="size-error error-'+i+'">Please select a size</h4></div></li>';
						}
						//mobile
						else if($(window).width() < 737){
							var li = '<li class="li-'+i+'"><div><a href="'+ pdpUrl +'" target="_blank"><img src="'+imgSrc+'" alt="'+title+'"/></a><h3><span class="title"><a href="'+ pdpUrl +'" target="_blank">'+title+'</a></span><br><span class="price">'+price+'</span></h3><select class="sizes-'+i+'"><option>size</option></select><a href="#" class="cta add-to-bag-'+i+' disabled">add to bag</a><h4 class="size-error error-'+i+'">Please select a size</h4></div></li>';
						}  

						

						//make the drop down element
						$('.drop > ul').append(li);

						//show the close svg icon
						$('.close-svg').show();

						//desktop output sizes dropdown
						if($(window).width()> 737){
							//add the sizes to the dropdown
							$.each(sizesArray, function(k, size){
								$('.sizes-' + i).append('<li value="'+size+'">'+size+'</li>');
							});

							//if sold out
							soldOut('.sizes-' + i + ' li', i);

							//hide show the sizes dropdown
							$('.sizes-' + i).click(function(){
								$(this).closest('.sizes-container').toggleClass('show-sizes');
							});

							//sizes dropdown li click
							$('.sizes-' + i + ' li').click(function(){
								$('.sizes-' + i + ' li').removeAttr('class');
								var text = $(this).text();
								if(text !== 'size') {
									$(this).addClass('selected');
									var num = $(this).text();
									$('.sizes-' + i + ' li:first-of-type').text(num);
									$('.add-to-bag-' + i).removeClass('disabled');
									$('.error-' + i).hide();
								}
							
							});
						}

						// mobile output sizes dropdown
						else if($(window).width()< 737) {
							//add the sizes to the dropdown
							$.each(sizesArray, function(k, size){
								$('.sizes-' + i).append('<option value="'+size+'">'+size+'</option>');
							});

							//if sold out
							soldOut('.sizes-' + i + ' option', i);
						}
						

						//remove the loading
						$('.loading').remove();

						//desktop only adjust width of .drop ul
						// if($(window).width()>737){
						// 	console.log('drop length: ', $('.drop > ul > li').length);
						// 	//only if less than 3
						// 	if($('.drop > ul > li').length < 3){
						// 		console.log('drop is greater than 3');

						// 		//adjust the width of .drop > ul
						// 		var theLength = $('.drop > ul > li');
						// 		console.log(theLength);

						// 		var count = 0;
						// 		$.each(theLength, function(l,w){
						// 			if(w !== 0) {
						// 				var width = $(w).outerWidth();
						// 				count = count + width;
						// 				console.log('the count: ', count);
						// 			}
						// 		});

						// 		$('.drop > ul').css('width', count + 'px');

						// 		//reset variables
						// 		theLength = 0;
						// 		count = 0; 
						// 	}
						// }
						
						

						//select change
						$('.sizes-' + i).change(function(){
							var theVal = $(this).val();
							// if select is a number remove .disable from the add to bag
							if(theVal !== 'size') {
								$('.add-to-bag-' + i).removeClass('disabled');
								$('.error-' + i).hide();
							} else {
								$('.add-to-bag-' + i).addClass('disabled');
							}
						});

						//add to bag click
						$('.add-to-bag-' + i).click(function(e){
							e.preventDefault();
							var li = $(this).closest('li');
							var title = $(li).find('.title').text();

							//desktop
							if($(window).width()>737){
								var select = $(this).siblings('.sizes-container').find('.selected').html();
							}

							//mobile
							else if($(window).width()<737){
								var select = $(this).siblings('select').val();
							}

							//if size not selected
							if(select == undefined || select == 'size'){
								$('.error-' + i).show();
								$('.sizes-' + i).focus();
							} else {
								$('.error-' + i).hide();
								//build the url
								var buyUrl = '/?page=item&action=buy&id[0]=' + val + '-' + select + '&qty[0]=1';

								//hide the cta
								$('.add-to-bag-' + i).hide();
								//add the processing message
								$('.add-to-bag-' + i).after('<h4 class="processing">PROCESSING...</h4>');
								//add to bag function
								$.post(buyUrl, function(){
									$('.processing').html('SUCCESS!!!');

									$(li).append('<div class="success"><h3>'+title+' added to cart.</h3><i>'+closeSvg+'</i></div>');
									
									$('#view-cart').trigger('mouseenter');
									
									// close the popup on click
									$('.success i').click(function(){
										$('.success').remove();
										$('.processing').remove();
										$('.add-to-bag-' + i).fadeIn();
									});

									setTimeout(function(){
										$('.processing').remove();
										$('.success').fadeOut();
										$('.add-to-bag-' + i).fadeIn();
									},2000);
								});

							}
						});
					});
				} 

			});

		});
	});	
</script>

