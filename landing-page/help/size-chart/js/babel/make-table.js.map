{"version":3,"file":"make-table.js","names":["deptCat","require","makeTableHeader","outputTable","module","exports","$","show","trs","each","i","val","attr","remove","tables","dept","cat","sheet","sheets","console","log","sheetVal","data","rowData","values","formattedValue","sheetArr","split","sheetDept","sheetCatArr","j","category","rows","colspan","hide","subcat","undefined","merges","endColumnIndex"],"sources":["../make-table.js"],"sourcesContent":["var deptCat = require('./set-dept-cat.js');\r\nvar makeTableHeader = require('./make-table-header.js');\r\nvar outputTable = require('./output-table.js');\r\n\r\nmodule.exports = function() {\r\n  //function to create the tables\r\n  //show .the-table\r\n  $('.size-chart-table .the-table').show();\r\n\r\n  //remove all <tr> except the 1st one\r\n  var trs = $('.size-chart-table table tr');\r\n  $.each(trs, function(i, val) {\r\n    if ($(val).attr('class') !== 'size-chart-header') {\r\n      $(val).remove();\r\n    }\r\n  });\r\n\r\n  //remove all the tables except the .the-table\r\n  var tables = $('.size-chart-table table');\r\n  $.each(tables, function(i, val) {\r\n    if ($(val).attr('class') !== 'the-table') {\r\n      $(val).remove();\r\n    }\r\n  });\r\n\r\n  //the selected values\r\n  var dept = deptCat('.size-chart-container ul.department .selected', '.size-chart-container select.department');\r\n  var cat = deptCat('.size-chart-container ul.category .selected', '.size-chart-container select.category');\r\n\r\n  var sheet = sheets;\r\n  console.log('from make-table.js');\r\n  console.log(sheet);\r\n\r\n  //loop through sheet and find the matched table\r\n  $.each(sheet, function(i, val) {\r\n    var sheetVal = val.data[0].rowData[2].values[0].formattedValue;\r\n    var sheetArr = sheetVal.split(':');\r\n    var sheetDept = sheetArr[0];\r\n    var sheetCatArr = sheetArr[1].split(',');\r\n    // console.log(sheetCatArr);\r\n\r\n    //if baby\r\n    if (sheetDept == 'baby') {\r\n      sheetDept = ['baby girl', 'baby boy'];\r\n    }\r\n\r\n    //check if dept matches\r\n    if (sheetDept == dept || sheetDept[0] == dept || sheetDept[1] == dept) {\r\n      //check if cat matches\r\n      $.each(sheetCatArr, function(j, category) {\r\n        if (category == cat) {\r\n          // console.log(i,val);\r\n          var rows;\r\n          var colspan;\r\n\r\n          //if newborn department or category is shoes + accessories\r\n          if (dept == 'newborn' || cat == 'shoes + accessories') {\r\n            //hide the top table\r\n            $('.size-chart-container .the-table').hide();\r\n\r\n            var subcat = val.data[0].rowData[2].values[0].formattedValue;\r\n\r\n            //if not newborn\r\n            if (dept !== 'newborn') {\r\n              subcat = subcat.split(',')[1];\r\n            } else {\r\n              //this is newborn\r\n              subcat = subcat.split(',');\r\n\r\n              if (subcat[1] !== undefined) {\r\n                subcat = subcat[1];\r\n              } else {\r\n                subcat = 'all categories';\r\n              }\r\n\r\n            }\r\n\r\n            // console.log(subcat);\r\n\r\n            //if girl\r\n            if (dept == 'girl') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //if boy || baby girl || baby baby\r\n            if (dept == 'boy' || dept == 'baby girl' || dept == 'baby boy') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //if newborn\r\n            if (dept == 'newborn') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //output the table contents\r\n            outputTable(i, val, rows);\r\n\r\n            //stop the function\r\n            return false;\r\n\r\n          } else {\r\n\r\n            rows = val.merges[0].endColumnIndex - 1;\r\n            colspan = val.merges[0].endColumnIndex;\r\n\r\n            //add colspan to .size-chart-header\r\n            $('.size-chart-header th').attr('colspan', colspan);\r\n\r\n            //output the table contents\r\n            outputTable(i, val, rows);\r\n\r\n            //stop the function\r\n            return false;\r\n          }\r\n\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n};"],"mappings":"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"}