{"version":3,"file":"scripts.js","names":["_phone","require","_inview","$","document","ready","inview","url","window","location","href","companyId","list1","list2","custom_source","click","e","id","attr","hide","show","emailIsValid","email","test","preventDefault","ac","thisForm","closest","console","log","find","on","val","replace","fname","lname","phone","affiliation","how","refer","orgName","orgAddress","orgEIN","state","city","zip","valid","theData","data","type","attributes","properties","first_name","last_name","school_days_organization_name","school_days_organization_affiliation","school_days_organization_city","school_days_organization_region","school_days_organization_zip","school_days_organization_country","length","phoneConvert","phone_number","list_id","school_days_organization_org_ein","school_days_organization_address","school_days_organization_how","JSON","stringify","ajax","concat","headers","revision","success","status","xhr","html","school_days_organization_referer"],"sources":["../scripts.js"],"sourcesContent":["import {\r\n  phoneConvert\r\n} from './phone.js';\r\nimport {\r\n  inview\r\n} from './inview.js';\r\n\r\n$(document).ready(function () {\r\n\r\n  inview('.main-content .header .div-2');\r\n\r\n  const url = window.location.href;\r\n\r\n  var companyId = `RAd6JR`;\r\n  var list1 = `XQN7pP`;\r\n  var list2 = `SGNXSc`;\r\n  var custom_source = ``;\r\n\r\n  $('.main-content a').click(function (e) {\r\n    // e.preventDefault();\r\n    var id = $(this).attr('href');\r\n    $('.forms div').hide();\r\n    $(id).show();\r\n\r\n  });\r\n\r\n  function emailIsValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  $('.forms button').click(function (e) {\r\n    // console.log(e.target);\r\n    e.preventDefault();\r\n\r\n    var ac = $(this).attr('data-list');\r\n    var thisForm = $(this).closest('form');\r\n\r\n    //? force phone to only be numbers\r\n    console.log($(thisForm).find('input[name=\"the-phone\"]'));\r\n\r\n    $(thisForm).find('input[name=\"the-phone\"]').on('input', function (e) {\r\n      $(this).val($(this).val().replace(/[^0-9]/g, ''));\r\n    });\r\n\r\n    //user info\r\n    var email = $(thisForm).find('input[name=\"user-email\"]').val();\r\n    var fname = $(thisForm).find('input[name=\"user-fname\"]').val();\r\n    var lname = $(thisForm).find('input[name=\"user-lname\"]').val();\r\n    var phone = $(thisForm).find('input[name=\"the-phone\"]').val();\r\n    var affiliation = $(thisForm).find('input[name=\"user-affiliation\"]').val();\r\n    var how = $(thisForm).find('input[name=\"user-how\"]').val();\r\n    var refer = $(thisForm).find('input[name=\"user-refer-name\"]').val();\r\n\r\n    //org info\r\n    var orgName = $(thisForm).find('input[name=\"org-name\"]').val();\r\n    var orgAddress = $(thisForm).find('input[name=\"org-address\"]').val();\r\n    var orgEIN = $(thisForm).find('input[name=\"org-ein\"]').val();\r\n    var state = $(thisForm).find('.states').val();\r\n    var city = $(thisForm).find('input[name=\"org-city\"]').val();\r\n    var zip = $(thisForm).find('input[name=\"org-zip\"]').val();\r\n\r\n    var valid = emailIsValid(email);\r\n    // console.log('valid:' + valid);\r\n\r\n    if (valid && fname !== \"\" && lname !== \"\" && orgName !== \"\" && orgAddress !== \"\" && city !== \"\" && zip !== \"\" && state !== \"please choose\") {\r\n      // $('.signup .form').hide();\r\n      // $('.signup .sending').show();\r\n\r\n      var theData = {\r\n        data: {\r\n          type: \"subscription\",\r\n          attributes: {\r\n            email: email,\r\n            properties: {\r\n              first_name: fname,\r\n              last_name: lname,\r\n              school_days_organization_name: orgName,\r\n              school_days_organization_affiliation: affiliation,\r\n              school_days_organization_city: city,\r\n              school_days_organization_region: state,\r\n              school_days_organization_zip: zip,\r\n              school_days_organization_country: \"United States\",\r\n            },\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n      if (phone !== `` && phone.length == 10) {\r\n        phone = phoneConvert(phone);\r\n        theData.data.attributes.phone_number = phone;\r\n      }\r\n\r\n      if (ac == \"school days sign up\" && orgEIN !== \"\") {\r\n\r\n        theData.data.attributes.custom_source = ac;\r\n        theData.data.attributes.list_id = list1;\r\n        theData.data.attributes.properties.school_days_organization_org_ein = orgEIN;\r\n        theData.data.attributes.properties.school_days_organization_address = orgAddress;\r\n        theData.data.attributes.properties.school_days_organization_how = how;\r\n\r\n        console.log(theData);\r\n\r\n        theData = JSON.stringify(theData);\r\n\r\n        $.ajax({\r\n          url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n          type: 'post',\r\n          data: theData,\r\n          headers: {\r\n            revision: '2023-02-22',\r\n            'content-type': 'application/json'\r\n          },\r\n          success: function (data, status, xhr) {\r\n            console.log('klaviyo success register');\r\n            // jQuery(document).trigger('klaviyoSuccess', data);\r\n            $('.forms .error, .forms .join-today').hide();\r\n            $('.forms .success h2').html('Successfully sent! <br> Look out for an email from <br> The School Days team shortly.');\r\n            $('.forms .success').show();\r\n          }\r\n        });\r\n\r\n      } else if (ac == \"school days referral\") {\r\n\r\n        theData.data.attributes.custom_source = ac;\r\n        theData.data.attributes.list_id = list2;\r\n        theData.data.attributes.properties.school_days_organization_referer = refer;\r\n\r\n        console.log(theData);\r\n\r\n        theData = JSON.stringify(theData);\r\n\r\n        $.ajax({\r\n          url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n          type: 'post',\r\n          data: theData,\r\n          headers: {\r\n            revision: '2023-02-22',\r\n            'content-type': 'application/json'\r\n          },\r\n          success: function (data, status, xhr) {\r\n            console.log('klaviyo success register');\r\n            // jQuery(document).trigger('klaviyoSuccess', data);\r\n            $('.forms .error, .forms .refer-org').hide();\r\n            $('.forms .success h2').html('Successfully sent!');\r\n            $('.forms .success').show();\r\n          }\r\n        });\r\n\r\n      } else {\r\n        $('.forms .error').show();\r\n      }\r\n\r\n    } else {\r\n      $('.forms .error').show();\r\n    }\r\n\r\n  });\r\n\r\n});"],"mappings":"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"}