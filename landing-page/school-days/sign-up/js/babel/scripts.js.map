{"version":3,"sources":["../scripts.js"],"names":["$","document","ready","url","window","location","href","companyId","list1","list2","custom_source","click","e","id","attr","hide","show","emailIsValid","email","test","preventDefault","ac","thisForm","closest","console","log","find","on","val","replace","fname","lname","phone","affiliation","how","refer","orgName","orgAddress","orgEIN","state","city","zip","valid","theData","data","type","attributes","properties","first_name","last_name","school_days_organization_name","school_days_organization_affiliation","school_days_organization_city","school_days_organization_region","school_days_organization_zip","school_days_organization_country","length","phone_number","list_id","school_days_organization_org_ein","school_days_organization_address","school_days_organization_how","JSON","stringify","ajax","headers","revision","success","status","xhr","html","school_days_organization_referer"],"mappings":"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","sourcesContent":["import {\r\n  phoneConvert\r\n} from './phone.js';\r\nimport {\r\n  inview\r\n} from './inview.js';\r\n\r\n$(document).ready(function () {\r\n\r\n  inview('.main-content .header .div-2');\r\n\r\n  const url = window.location.href;\r\n\r\n  var companyId = `RAd6JR`;\r\n  var list1 = `XQN7pP`;\r\n  var list2 = `SGNXSc`;\r\n  var custom_source = ``;\r\n\r\n  $('.main-content a').click(function (e) {\r\n    // e.preventDefault();\r\n    var id = $(this).attr('href');\r\n    $('.forms div').hide();\r\n    $(id).show();\r\n\r\n  });\r\n\r\n  function emailIsValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  $('.forms button').click(function (e) {\r\n    // console.log(e.target);\r\n    e.preventDefault();\r\n\r\n    var ac = $(this).attr('data-list');\r\n    var thisForm = $(this).closest('form');\r\n\r\n    //? force phone to only be numbers\r\n    console.log($(thisForm).find('input[name=\"the-phone\"]'));\r\n\r\n    $(thisForm).find('input[name=\"the-phone\"]').on('input', function (e) {\r\n      $(this).val($(this).val().replace(/[^0-9]/g, ''));\r\n    });\r\n\r\n    //user info\r\n    var email = $(thisForm).find('input[name=\"user-email\"]').val();\r\n    var fname = $(thisForm).find('input[name=\"user-fname\"]').val();\r\n    var lname = $(thisForm).find('input[name=\"user-lname\"]').val();\r\n    var phone = $(thisForm).find('input[name=\"the-phone\"]').val();\r\n    var affiliation = $(thisForm).find('input[name=\"user-affiliation\"]').val();\r\n    var how = $(thisForm).find('input[name=\"user-how\"]').val();\r\n    var refer = $(thisForm).find('input[name=\"user-refer-name\"]').val();\r\n\r\n    //org info\r\n    var orgName = $(thisForm).find('input[name=\"org-name\"]').val();\r\n    var orgAddress = $(thisForm).find('input[name=\"org-address\"]').val();\r\n    var orgEIN = $(thisForm).find('input[name=\"org-ein\"]').val();\r\n    var state = $(thisForm).find('.states').val();\r\n    var city = $(thisForm).find('input[name=\"org-city\"]').val();\r\n    var zip = $(thisForm).find('input[name=\"org-zip\"]').val();\r\n\r\n    var valid = emailIsValid(email);\r\n    // console.log('valid:' + valid);\r\n\r\n    if (valid && fname !== \"\" && lname !== \"\" && orgName !== \"\" && orgAddress !== \"\" && city !== \"\" && zip !== \"\" && state !== \"please choose\") {\r\n      // $('.signup .form').hide();\r\n      // $('.signup .sending').show();\r\n\r\n      var theData = {\r\n        data: {\r\n          type: \"subscription\",\r\n          attributes: {\r\n            email: email,\r\n            properties: {\r\n              first_name: fname,\r\n              last_name: lname,\r\n              school_days_organization_name: orgName,\r\n              school_days_organization_affiliation: affiliation,\r\n              school_days_organization_city: city,\r\n              school_days_organization_region: state,\r\n              school_days_organization_zip: zip,\r\n              school_days_organization_country: \"United States\",\r\n            },\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n      if (phone !== `` && phone.length == 10) {\r\n        phone = phoneConvert(phone);\r\n        theData.data.attributes.phone_number = phone;\r\n      }\r\n\r\n      if (ac == \"school days sign up\" && orgEIN !== \"\") {\r\n\r\n        theData.data.attributes.custom_source = ac;\r\n        theData.data.attributes.list_id = list1;\r\n        theData.data.attributes.properties.school_days_organization_org_ein = orgEIN;\r\n        theData.data.attributes.properties.school_days_organization_address = orgAddress;\r\n        theData.data.attributes.properties.school_days_organization_how = how;\r\n\r\n        console.log(theData);\r\n\r\n        theData = JSON.stringify(theData);\r\n\r\n        $.ajax({\r\n          url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n          type: 'post',\r\n          data: theData,\r\n          headers: {\r\n            revision: '2023-02-22',\r\n            'content-type': 'application/json'\r\n          },\r\n          success: function (data, status, xhr) {\r\n            console.log('klaviyo success register');\r\n            // jQuery(document).trigger('klaviyoSuccess', data);\r\n            $('.forms .error, .forms .join-today').hide();\r\n            $('.forms .success h2').html('Successfully sent! <br> Look out for an email from <br> The School Days team shortly.');\r\n            $('.forms .success').show();\r\n          }\r\n        });\r\n\r\n      } else if (ac == \"school days referral\") {\r\n\r\n        theData.data.attributes.custom_source = ac;\r\n        theData.data.attributes.list_id = list2;\r\n        theData.data.attributes.properties.school_days_organization_referer = refer;\r\n\r\n        console.log(theData);\r\n\r\n        theData = JSON.stringify(theData);\r\n\r\n        $.ajax({\r\n          url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n          type: 'post',\r\n          data: theData,\r\n          headers: {\r\n            revision: '2023-02-22',\r\n            'content-type': 'application/json'\r\n          },\r\n          success: function (data, status, xhr) {\r\n            console.log('klaviyo success register');\r\n            // jQuery(document).trigger('klaviyoSuccess', data);\r\n            $('.forms .error, .forms .refer-org').hide();\r\n            $('.forms .success h2').html('Successfully sent!');\r\n            $('.forms .success').show();\r\n          }\r\n        });\r\n\r\n      } else {\r\n        $('.forms .error').show();\r\n      }\r\n\r\n    } else {\r\n      $('.forms .error').show();\r\n    }\r\n\r\n  });\r\n\r\n});"],"file":"scripts.js"}