{"version":3,"sources":["../scripts.js"],"names":["jQuery","document","ready","companyId","list1","list2","custom_source","emailIsValid","email","test","change","cb","prop","val","$","each","userSrc","i","option","key","value","append","submit","e","preventDefault","hide","show","fname","lname","address1","address2","city","state","zip","subscribe","howHear","valid","remove","theData","data","type","attributes","properties","first_name","last_name","region","request_catalog_how_did_you_hear","country","states","err","closest","before","list_id","console","log","JSON","stringify","ajax","url","headers","revision","success","status","xhr","setTimeout","fadeOut","fadeIn","parse"],"mappings":"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","sourcesContent":["import {\r\n  userSrc\r\n} from './user-src.js';\r\n\r\njQuery(document).ready(function () {\r\n\r\n  var companyId = `RAd6JR`;\r\n  //? CATALOG REQUEST LIST\r\n  var list1 = `VyxhXA`;\r\n  //? MASTER EMAIL LIST\r\n  var list2 = `WiTjSE`;\r\n  var custom_source = `request catalog`;\r\n\r\n  function emailIsValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  jQuery('#optin').change(function () {\r\n    var cb = jQuery(this);\r\n    if (cb.prop('checked')) {\r\n      jQuery(this).val('yes');\r\n    } else {\r\n      jQuery(this).val('no');\r\n    }\r\n  });\r\n\r\n  //add the user source\r\n  $.each(userSrc, function (i, val) {\r\n    var option = '<option value=\"' + val.key + '\">' + val.value + '</option>';\r\n    $('#user-src').append(option);\r\n  });\r\n\r\n  //submit the form\r\n  $('.responsys').submit(function (e) {\r\n    e.preventDefault();\r\n\r\n    $('form.responsys input[type=\"submit\"]').hide();\r\n    $('form.responsys .sending').show();\r\n\r\n    var fname = $('form.responsys input[name=\"first_name\"]').val();\r\n    var lname = $('form.responsys input[name=\"last_name\"]').val();\r\n    var address1 = $('form.responsys input[name=\"POSTAL_STREET_1_\"]').val();\r\n    var address2 = $('form.responsys input[name=\"POSTAL_STREET_2_\"]').val();\r\n    var city = $('form.responsys input[name=\"CITY_\"]').val();\r\n    var state = $('#states').val();\r\n    var zip = $('form.responsys input[name=\"POSTAL_CODE_\"]').val();\r\n    var email = $('form.responsys input[name=\"EMAIL_ADDRESS_\"]').val();\r\n    var subscribe = $('#optin').val();\r\n    var howHear = $('#user-src').val();\r\n    if (howHear == \"Please Select\") {\r\n      howHear = \"\";\r\n    }\r\n\r\n    var valid = emailIsValid(email);\r\n\r\n    //remove all errors\r\n    $('.responsys .the-error').remove();\r\n\r\n    var theData = {\r\n      data: {\r\n        type: \"subscription\",\r\n        attributes: {\r\n          email: email,\r\n          custom_source: custom_source,\r\n          properties: {\r\n            first_name: fname,\r\n            last_name: lname,\r\n            address1: address1,\r\n            address2: address2,\r\n            city: city,\r\n            region: state,\r\n            zip: zip,\r\n            request_catalog_how_did_you_hear: howHear,\r\n            country: \"United States\",\r\n          },\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    //? MAKE SURE A STATE IS SELECTED\r\n    var states = $('#states').val();\r\n    if (states == 'Please Select*') {\r\n      var err = '<div class=\"the-error\"><label></label><span class=\"error\">Please Select a State</span></div>';\r\n      $('#states').closest('div').before(err);\r\n    } else if (valid && fname !== \"\" && lname !== \"\" && address1 !== \"\" && city !== \"\" && zip !== \"\") {\r\n\r\n      //? PUSH TO CATALOG REQUEST LIST\r\n      theData.data.attributes.list_id = list1;\r\n\r\n      console.log(theData);\r\n      theData = JSON.stringify(theData);\r\n\r\n      $.ajax({\r\n        url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n        type: 'post',\r\n        data: theData,\r\n        headers: {\r\n          revision: '2023-02-22',\r\n          'content-type': 'application/json'\r\n        },\r\n        success: function (data, status, xhr) {\r\n          console.log('klaviyo success register push to catalog');\r\n          // jQuery(document).trigger('klaviyoSuccess', data);\r\n          $('form.responsys .sending').hide();\r\n          $('form.responsys .success').show();\r\n\r\n          setTimeout(function () {\r\n            $('form.responsys .success').fadeOut(function () {\r\n              $('form.responsys input[type=\"submit\"]').fadeIn();\r\n            });\r\n          }, 2000);\r\n        }\r\n      });\r\n\r\n      if (subscribe == `yes`) {\r\n        //? PUSH MASTER EMAIL LIST IF SUBSCRIBE\r\n        theData = JSON.parse(theData);\r\n        theData.data.attributes.list_id = list2;\r\n\r\n        console.log(theData);\r\n        theData = JSON.stringify(theData);\r\n\r\n        $.ajax({\r\n          url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n          type: 'post',\r\n          data: theData,\r\n          headers: {\r\n            revision: '2023-02-22',\r\n            'content-type': 'application/json'\r\n          },\r\n          success: function (data, status, xhr) {\r\n            console.log('klaviyo success register push to master');\r\n            // jQuery(document).trigger('klaviyoSuccess', data);\r\n          }\r\n        });\r\n\r\n      }\r\n\r\n    }\r\n  });\r\n\r\n  //#states change\r\n  $('#states').change(function (e) {\r\n    var states = $('#states').val();\r\n    if (states !== 'Please Select*') {\r\n      //remove all errors\r\n      $('.responsys .the-error').remove();\r\n    }\r\n  });\r\n\r\n});"],"file":"scripts.js"}