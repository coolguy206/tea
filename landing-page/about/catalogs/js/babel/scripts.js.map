{"version":3,"sources":["../scripts.js"],"names":["vars","require","key","showCatalog","showThumbs","$","document","ready","a1","a2","f","p","sig1","secret","md5","get","baseUrl","access","action","format","data","totalCatalogs","rsp","_content","result","totalCount","sig2","catalogs","sort","x","y","Date","publishDate","each","i","val","title","replace","append","name","description","firstThumb","attr","firstDesc","remove","click","desc","children","window","scrollTo"],"mappings":"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","sourcesContent":["const vars = require('./vars.js');\nconst key = require('./key.js');\nconst showCatalog = require('./showCatalog.js');\nconst showThumbs = require('./showThumbs.js');\n\n$(document).ready(function() {\n\n    var a1 = vars.a1();\n    // console.log(a1);\n\n    var a2 = vars.a2();\n    // console.log(a2);\n\n    var f = vars.f();\n    // console.log(f);\n\n    var p = vars.p();\n    // console.log(p);\n\n    var sig1 = `${key.secret}${a1}${a2}apiKey${key.key}${f}`;\n    // console.log(sig1);\n\n    sig1 = $.md5(sig1);\n    // console.log('sig1');\n    // console.log(sig1);\n\n\n\n    // console.log('get 1');\n    // console.log(`${vars.baseUrl}?${vars.access}&${vars.action}&apiKey=${key.key}&${vars.format}&signature=${sig1}`);\n\n    //start the initial get of the catalogs\n    $.get(`${vars.baseUrl}?${vars.access}&${vars.action}&apiKey=${key.key}&${vars.format}&signature=${sig1}`, function(data) {\n        // console.log(data);\n        var totalCatalogs = data.rsp._content.result.totalCount;\n\n        var sig2 = `${key.secret}${a1}${a2}apiKey${key.key}${f}${p}${totalCatalogs}`;\n\n        // console.log('sig2');\n        // console.log(sig2);\n\n        sig2 = $.md5(sig2);\n\n        // console.log('get 2');\n        // console.log(`${vars.baseUrl}?${vars.access}&${vars.action}&apiKey=${key.key}&${vars.format}&pageSize=${totalCatalogs}&signature=${sig2}`);\n\n        //get all the catalogs\n        $.get(`${vars.baseUrl}?${vars.access}&${vars.action}&apiKey=${key.key}&${vars.format}&pageSize=${totalCatalogs}&signature=${sig2}`, function(data) {\n            // console.log(data);\n            var catalogs = data.rsp._content.result._content;\n\n            // sort the catalogs from most recent\n            catalogs.sort(function(x, y) {\n                return new Date(y.document.publishDate) - new Date(x.document.publishDate);\n            });\n\n            //append the li with data-name\n            $(catalogs).each(function(i, val) {\n                var title = val.document.title;\n                title = title.replace('Tea Collection - ', '');\n                title = title.replace(/\\(|\\)/gi, '');\n                $('.navigation-catalog ul').append(`<li data-name=\"${val.document.name}\" data-desc=\"${val.document.description}\"><h4>${title}</h4></li>`);\n            });\n\n            //load the first catalog\n            var firstThumb = $('.navigation-catalog ul li:first-of-type').attr('data-name');\n            var firstDesc = $('.navigation-catalog ul li:first-of-type').attr('data-desc');\n\n            showCatalog(firstThumb, 1000, firstDesc);\n\n\n            //load the thumbnails\n            showThumbs();\n\n            //remove loading\n            $('.loading').remove();\n\n\n            //click thumb change the flipbook\n            $('.navigation-catalog ul li').click(function() {\n                // console.log('li clicked');\n                \n                var name = $(this).attr('data-name');\n                var desc = $(this).attr('data-desc');\n                $('#flipBook').children().remove();\n\n                showCatalog(name, 1000, desc);\n\n                window.scrollTo(0, 140);\n\n\n            });\n\n\n        }); //end of $.get\n    }); //end of $.get\n\n\n});"],"file":"scripts.js"}