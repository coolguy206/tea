{"version":3,"sources":["../scripts.js"],"names":["jQuery","document","ready","ac","emailIsValid","email","test","$","submit","e","preventDefault","remove","states","val","err","closest","before","companyId","list","fname","lname","address1","address2","city","state","zip","hide","show","valid","theData","data","type","attributes","first_name","last_name","location","country","region","properties","catalog_optout","console","log","JSON","stringify","fetch","method","headers","revision","body","then","focus","change"],"mappings":";;AAAAA,MAAM,CAACC,QAAD,CAAN,CAAiBC,KAAjB,CAAuB,YAAY;AAE/B,MAAMC,EAAE,GAAG,gBAAX;;AAEA,WAASC,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,WAAO,6BAA6BC,IAA7B,CAAkCD,KAAlC,CAAP;AACH,GAN8B,CAQ/B;;;AACAE,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeC,MAAf,CAAsB,UAAUC,CAAV,EAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF,GAD+B,CAG/B;;AACAH,IAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BI,MAA1B,GAJ+B,CAM/B;;AACA,QAAIC,MAAM,GAAGL,CAAC,CAAC,SAAD,CAAD,CAAaM,GAAb,EAAb;;AACA,QAAID,MAAM,IAAI,gBAAd,EAAgC;AAC5B,UAAIE,GAAG,GAAG,8FAAV;AACAP,MAAAA,CAAC,CAAC,SAAD,CAAD,CAAaQ,OAAb,CAAqB,KAArB,EAA4BC,MAA5B,CAAmCF,GAAnC;AACH,KAHD,MAGO;AAEH;AACA,UAAIG,SAAS,WAAb;AACA,UAAIC,IAAI,WAAR;AACA,UAAIb,KAAK,GAAGE,CAAC,CAAC,+BAAD,CAAD,CAAmCM,GAAnC,EAAZ;AACA,UAAIM,KAAK,GAAGZ,CAAC,CAAC,oCAAD,CAAD,CAAwCM,GAAxC,EAAZ;AACA,UAAIO,KAAK,GAAGb,CAAC,CAAC,mCAAD,CAAD,CAAuCM,GAAvC,EAAZ;AACA,UAAIQ,QAAQ,GAAGd,CAAC,CAAC,0CAAD,CAAD,CAA8CM,GAA9C,EAAf;AACA,UAAIS,QAAQ,GAAGf,CAAC,CAAC,0CAAD,CAAD,CAA8CM,GAA9C,EAAf;AACA,UAAIU,IAAI,GAAGhB,CAAC,CAAC,+BAAD,CAAD,CAAmCM,GAAnC,EAAX;AACA,UAAIW,KAAK,GAAGjB,CAAC,CAAC,iCAAD,CAAD,CAAqCM,GAArC,EAAZ;AACA,UAAIY,GAAG,GAAGlB,CAAC,CAAC,sCAAD,CAAD,CAA0CM,GAA1C,EAAV,CAZG,CAcH;;AACAN,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAemB,IAAf;AACAnB,MAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBoB,IAAjB;AAEA,UAAIC,KAAK,GAAGxB,YAAY,CAACC,KAAD,CAAxB;;AAEA,UAAIuB,KAAJ,EAAW;AACP,YAAIC,OAAO,GAAG;AACVC,UAAAA,IAAI,EAAE;AACFC,YAAAA,IAAI,EAAE,SADJ;AAEFC,YAAAA,UAAU,EAAE;AACR3B,cAAAA,KAAK,EAAEA,KADC;AAER4B,cAAAA,UAAU,EAAEd,KAFJ;AAGRe,cAAAA,SAAS,EAAEd,KAHH;AAIRe,cAAAA,QAAQ,EAAE;AACNd,gBAAAA,QAAQ,EAAEA,QADJ;AAENC,gBAAAA,QAAQ,EAAEA,QAFJ;AAGNC,gBAAAA,IAAI,EAAEA,IAHA;AAINa,gBAAAA,OAAO,EAAE,eAJH;AAKNC,gBAAAA,MAAM,EAAEb,KALF;AAMNC,gBAAAA,GAAG,EAAEA;AANC,eAJF;AAYRa,cAAAA,UAAU,EAAE;AACRC,gBAAAA,cAAc,EAAE;AADR;AAZJ;AAFV;AADI,SAAd;AAsBAC,QAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAZ;AACAA,QAAAA,OAAO,GAAGa,IAAI,CAACC,SAAL,CAAed,OAAf,CAAV;AAEAe,QAAAA,KAAK,6DAAsD3B,SAAtD,GAAmE;AACpE4B,UAAAA,MAAM,EAAE,MAD4D;AAEpEC,UAAAA,OAAO,EAAE;AACLC,YAAAA,QAAQ,EAAE,YADL;AAEL,4BAAgB;AAFX,WAF2D;AAMpEC,UAAAA,IAAI,EAAEnB;AAN8D,SAAnE,CAAL,CAOGoB,IAPH,CAOQ,UAACnB,IAAD,EAAU;AACdU,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;AAEAvB,UAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BoB,IAA5B;AACApB,UAAAA,CAAC,CAAC,WAAD,CAAD,CAAeoB,IAAf;AACApB,UAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBmB,IAAjB;AACAnB,UAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBmB,IAAhB,GAPc,CASd;;AACAnB,UAAAA,CAAC,CAAC,oCAAD,CAAD,CAAwCM,GAAxC,CAA4C,EAA5C;AACAN,UAAAA,CAAC,CAAC,mCAAD,CAAD,CAAuCM,GAAvC,CAA2C,EAA3C;AACAN,UAAAA,CAAC,CAAC,0CAAD,CAAD,CAA8CM,GAA9C,CAAkD,EAAlD;AACAN,UAAAA,CAAC,CAAC,0CAAD,CAAD,CAA8CM,GAA9C,CAAkD,EAAlD;AACAN,UAAAA,CAAC,CAAC,+BAAD,CAAD,CAAmCM,GAAnC,CAAuC,EAAvC;AACAN,UAAAA,CAAC,CAAC,sCAAD,CAAD,CAA0CM,GAA1C,CAA8C,EAA9C;AACH,SAvBD,WAuBS,UAACC,GAAD,EAAS;AACd0B,UAAAA,OAAO,CAACC,GAAR;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAY3B,GAAZ;AACH,SA1BD;AA6BH,OAvDD,MAuDO;AACH0B,QAAAA,OAAO,CAACC,GAAR;AACAlC,QAAAA,CAAC,CAAC,WAAD,CAAD,CAAeoB,IAAf;AACApB,QAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBmB,IAAjB;AACAnB,QAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBoB,IAAhB;AACApB,QAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB2C,KAAjB;AACH;AAEJ;AACJ,GA/FD,EAT+B,CA0G/B;;AACA3C,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAa4C,MAAb,CAAoB,UAAU1C,CAAV,EAAa;AAC7B,QAAIG,MAAM,GAAGL,CAAC,CAAC,SAAD,CAAD,CAAaM,GAAb,EAAb;;AACA,QAAID,MAAM,KAAK,gBAAf,EAAiC;AAC7B;AACAL,MAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BI,MAA1B;AACH;AACJ,GAND;AAOH,CAlHD","sourcesContent":["jQuery(document).ready(function () {\r\n\r\n    const ac = \"catalog_optout\";\r\n\r\n    function emailIsValid(email) {\r\n        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n    }\r\n\r\n    //submit the form\r\n    $('.sailthru').submit(function (e) {\r\n        e.preventDefault();\r\n\r\n        //remove all errors\r\n        $('.sailthru .the-error').remove();\r\n\r\n        //make sure a state is selected\r\n        var states = $('#states').val();\r\n        if (states == 'Please Select*') {\r\n            var err = '<div class=\"the-error\"><label></label><span class=\"error\">Please Select a State</span></div>';\r\n            $('#states').closest('div').before(err);\r\n        } else {\r\n\r\n            //vars\r\n            var companyId = `RAd6JR`;\r\n            var list = `WspXGk`;\r\n            var email = $('.sailthru input[name=\"email\"]').val();\r\n            var fname = $('.sailthru input[name=\"FIRST_NAME\"]').val();\r\n            var lname = $('.sailthru input[name=\"LAST_NAME\"]').val();\r\n            var address1 = $('.sailthru input[name=\"POSTAL_STREET_1_\"]').val();\r\n            var address2 = $('.sailthru input[name=\"POSTAL_STREET_2_\"]').val();\r\n            var city = $('.sailthru input[name=\"CITY_\"]').val();\r\n            var state = $('.sailthru select[name=\"STATE_\"]').val();\r\n            var zip = $('.sailthru input[name=\"POSTAL_CODE_\"]').val();\r\n\r\n            //hide form & show processing\r\n            $('.sailthru').hide();\r\n            $('.processing').show();\r\n\r\n            var valid = emailIsValid(email);\r\n\r\n            if (valid) {\r\n                var theData = {\r\n                    data: {\r\n                        type: 'profile',\r\n                        attributes: {\r\n                            email: email,\r\n                            first_name: fname,\r\n                            last_name: lname,\r\n                            location: {\r\n                                address1: address1,\r\n                                address2: address2,\r\n                                city: city,\r\n                                country: \"United States\",\r\n                                region: state,\r\n                                zip: zip\r\n                            },\r\n                            properties: {\r\n                                catalog_optout: 'y'\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n\r\n                console.log(theData);\r\n                theData = JSON.stringify(theData);\r\n\r\n                fetch(`https://a.klaviyo.com/client/profiles/?company_id=${companyId}`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        revision: '2023-12-15',\r\n                        'content-type': 'application/json'\r\n                    },\r\n                    body: theData,\r\n                }).then((data) => {\r\n                    console.log('klaviyo success register');\r\n                    console.log(data);\r\n\r\n                    $('.catalog-wrap .success').show();\r\n                    $('.sailthru').show();\r\n                    $('.processing').hide();\r\n                    $('span.error').hide();\r\n\r\n                    //clear field\r\n                    $('.sailthru input[name=\"FIRST_NAME\"]').val('');\r\n                    $('.sailthru input[name=\"LAST_NAME\"]').val('');\r\n                    $('.sailthru input[name=\"POSTAL_STREET_1_\"]').val('');\r\n                    $('.sailthru input[name=\"POSTAL_STREET_2_\"]').val('');\r\n                    $('.sailthru input[name=\"CITY_\"]').val('');\r\n                    $('.sailthru input[name=\"POSTAL_CODE_\"]').val('');\r\n                }).catch((err) => {\r\n                    console.log(`something went wrong`);\r\n                    console.log(err);\r\n                });\r\n\r\n\r\n            } else {\r\n                console.log(`email not valid`);\r\n                $('.sailthru').show();\r\n                $('.processing').hide();\r\n                $('span.error').show();\r\n                $('input#email').focus();\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n    //#states change\r\n    $('#states').change(function (e) {\r\n        var states = $('#states').val();\r\n        if (states !== 'Please Select*') {\r\n            //remove all errors\r\n            $('.sailthru .the-error').remove();\r\n        }\r\n    });\r\n});"],"file":"scripts.js"}