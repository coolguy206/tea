{"version":3,"sources":["../scripts.js"],"names":["window","location","href","$","document","ready","url","ac","emailIsValid","email","test","click","e","preventDefault","fname","val","lname","phone","checkbox","prop","valid","hide","show","Sailthru","integration","dataLayer","push","pdpObj","sig","md5","keys","secret","api","baseUrl","console","log","css","addClass"],"mappings":"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","sourcesContent":["import {\r\n  keys\r\n} from './api.js';\r\nimport {\r\n  inview\r\n} from './inview.js';\r\n// console.log(keys);\r\n\r\nwindow.location.href = \"https://www.teacollection.com/teaxsanrio\";\r\n\r\n$(document).ready(function() {\r\n\r\n  inview('.content-wrap');\r\n\r\n  const url = window.location.href;\r\n  const ac = \"SANRIO_2022_LP\";\r\n\r\n  function emailIsValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  $('.this-form form button').click(function(e) {\r\n    e.preventDefault();\r\n    // console.log(e.target);\r\n    var fname = $('.this-form input[name=\"fname\"]').val();\r\n    var lname = $('.this-form input[name=\"lname\"]').val();\r\n    var email = $('.this-form input[name=\"email\"]').val();\r\n    var phone = $('.this-form input[name=\"phone\"]').val();\r\n    var checkbox = $('.this-form input[type=checkbox]').prop('checked');\r\n    var valid = emailIsValid(email);\r\n    // console.log(`\r\n    //   fname: ${fname}\r\n    //   lname: ${lname}\r\n    //   email: ${email}\r\n    //   checkbox: ${checkbox}\r\n    //   valid: ${valid}`);\r\n\r\n    if (valid && checkbox && fname !== '' && lname !== '' && phone !== '') {\r\n      $('.this-form form').hide();\r\n      $('.this-form .sending').show();\r\n\r\n      Sailthru.integration(\"userSignUp\", {\r\n        \"id\": email,\r\n        \"email\": email,\r\n        \"lists\": {\r\n          // \"test\": 1\r\n          \"MASTER_CONTACTS_LIST\": 1,\r\n          \"SANRIO_2022\": 1\r\n        },\r\n        \"vars\": {\r\n          \"ACQUISITION_SOURCE\": ac,\r\n          \"first_name\": fname,\r\n          \"last_name\": lname,\r\n          \"phone_number\": phone\r\n        },\r\n        \"source\": ac,\r\n        \"onSuccess\": function() {\r\n          $('.this-form .sending').hide();\r\n          $('.this-form .successfully-sent').show();\r\n\r\n          window.dataLayer.push({\r\n            'event': 'sailthru',\r\n            'theUrl': url,\r\n            'sailthruEmail': email,\r\n            'sailthruSource': ac\r\n          });\r\n\r\n          var pdpObj = `{\"id\": \"${email}\", \"optout_email\": \"none\"}`;\r\n          // console.log(pdpObj);\r\n\r\n          var sig = md5(`${keys.secret}${keys.api}json${pdpObj}`);\r\n          // console.log(sig);\r\n\r\n          var baseUrl = `https://api.sailthru.com/user`;\r\n          /*\r\n                    var payload = {\r\n                      api_key: keys.api,\r\n                      sig: sig,\r\n                      format: 'json',\r\n                      json: pdpObj\r\n                    }\r\n\r\n                    fetch(baseUrl, {\r\n                      method: `POST`,\r\n                      headers: {\r\n                        'Access-Control-Allow-Origin': 'https://www.teacollection.com',\r\n                        'credentials': 'include'\r\n                      },\r\n                      body: JSON.stringify(payload),\r\n\r\n                    }).then((data) => {\r\n                      console.log(`submitted`);\r\n                      console.log(data);\r\n                    }).catch((err) => {\r\n                      console.log(`something went wrong`);\r\n                      console.log(err);\r\n                    })\r\n          */\r\n          /*\r\n                    var data = new FormData();\r\n                    data.append(\"api_key\", keys.api);\r\n                    data.append(\"format\", \"json\");\r\n                    data.append(\"json\", pdpObj);\r\n                    data.append(\"sig\", sig);\r\n\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.withCredentials = true;\r\n\r\n                    xhr.addEventListener(\"readystatechange\", function() {\r\n                      if (this.readyState === 4) {\r\n                        console.log(this.responseText);\r\n                      }\r\n                    });\r\n\r\n                    xhr.open(\"POST\", baseUrl);\r\n\r\n                    xhr.send(data);\r\n          */\r\n        }\r\n      });\r\n\r\n    } else {\r\n      console.log('error');\r\n      $('.this-form .sending').hide();\r\n      $('.this-form form').show();\r\n      $('.this-form .this-error').css('display', 'block');\r\n      $('.this-form input[name=\"fname\"], .this-form input[name=\"lname\"], .this-form input[name=\"email\"], .this-form input[type=checkbox], .this-form input[type=tel]').addClass('error-border')\r\n      // $('.this-form input').focus();\r\n    }\r\n  });\r\n\r\n\r\n});\r\n"],"file":"scripts.js"}