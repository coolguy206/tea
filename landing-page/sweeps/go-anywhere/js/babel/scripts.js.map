{"version":3,"sources":["../scripts.js"],"names":["$","document","ready","companyId","list","custom_source","emailIsValid","email","test","on","e","val","replace","click","preventDefault","fname","lname","phone","checkbox","prop","valid","hide","show","theData","data","type","attributes","list_id","properties","first_name","last_name","length","phone_number","console","log","JSON","stringify","ajax","url","headers","revision","success","status","xhr","css","addClass"],"mappings":";;AAAA;;AAGA;;AAGA;AAEAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;AAE5B,sBAAO,eAAP;AAEA,MAAIC,SAAS,WAAb;AACA,MAAIC,IAAI,WAAR;AACA,MAAIC,aAAa,yBAAjB;;AAEA,WAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,WAAO,6BAA6BC,IAA7B,CAAkCD,KAAlC,CAAP;AACD,GAV2B,CAY5B;;;AACAP,EAAAA,CAAC,CAAC,oCAAD,CAAD,CAAwCS,EAAxC,CAA2C,OAA3C,EAAoD,UAAUC,CAAV,EAAa;AAC/DV,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQW,GAAR,CAAYX,CAAC,CAAC,IAAD,CAAD,CAAQW,GAAR,GAAcC,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAZ;AACD,GAFD;AAIAZ,EAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4Ba,KAA5B,CAAkC,UAAUH,CAAV,EAAa;AAC7CA,IAAAA,CAAC,CAACI,cAAF,GAD6C,CAE7C;;AACA,QAAIC,KAAK,GAAGf,CAAC,CAAC,gCAAD,CAAD,CAAoCW,GAApC,EAAZ;AACA,QAAIK,KAAK,GAAGhB,CAAC,CAAC,gCAAD,CAAD,CAAoCW,GAApC,EAAZ;AACA,QAAIJ,KAAK,GAAGP,CAAC,CAAC,gCAAD,CAAD,CAAoCW,GAApC,EAAZ;AACA,QAAIM,KAAK,GAAGjB,CAAC,CAAC,oCAAD,CAAD,CAAwCW,GAAxC,EAAZ;AACA,QAAIO,QAAQ,GAAGlB,CAAC,CAAC,iCAAD,CAAD,CAAqCmB,IAArC,CAA0C,SAA1C,CAAf;AACA,QAAIC,KAAK,GAAGd,YAAY,CAACC,KAAD,CAAxB,CAR6C,CAS7C;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIa,KAAK,IAAIF,QAAT,IAAqBH,KAAK,KAAK,EAA/B,IAAqCC,KAAK,KAAK,EAAnD,EAAuD;AACrDhB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBqB,IAArB;AACArB,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBsB,IAAzB;AAEA,UAAIC,OAAO,GAAG;AACZC,QAAAA,IAAI,EAAE;AACJC,UAAAA,IAAI,EAAE,cADF;AAEJC,UAAAA,UAAU,EAAE;AACVC,YAAAA,OAAO,EAAEvB,IADC;AAEVC,YAAAA,aAAa,EAAEA,aAFL;AAGVE,YAAAA,KAAK,EAAEA,KAHG;AAIVqB,YAAAA,UAAU,EAAE;AACVC,cAAAA,UAAU,EAAEd,KADF;AAEVe,cAAAA,SAAS,EAAEd;AAFD;AAJF;AAFR;AADM,OAAd;;AAgBA,UAAIC,KAAK,OAAL,IAAgBA,KAAK,CAACc,MAAN,IAAgB,EAApC,EAAwC;AACtCd,QAAAA,KAAK,GAAG,yBAAaA,KAAb,CAAR;AACAM,QAAAA,OAAO,CAACC,IAAR,CAAaE,UAAb,CAAwBM,YAAxB,GAAuCf,KAAvC;AACD;;AAEDgB,MAAAA,OAAO,CAACC,GAAR,CAAYX,OAAZ;AAEAA,MAAAA,OAAO,GAAGY,IAAI,CAACC,SAAL,CAAeb,OAAf,CAAV;AAEAvB,MAAAA,CAAC,CAACqC,IAAF,CAAO;AACLC,QAAAA,GAAG,mEAA4DnC,SAA5D,CADE;AAELsB,QAAAA,IAAI,EAAE,MAFD;AAGLD,QAAAA,IAAI,EAAED,OAHD;AAILgB,QAAAA,OAAO,EAAE;AACPC,UAAAA,QAAQ,EAAE,YADH;AAEP,0BAAgB;AAFT,SAJJ;AAQLC,QAAAA,OAAO,EAAE,iBAAUjB,IAAV,EAAgBkB,MAAhB,EAAwBC,GAAxB,EAA6B;AACpCV,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EADoC,CAEpC;;AACAlC,UAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB;AACArB,UAAAA,CAAC,CAAC,+BAAD,CAAD,CAAmCsB,IAAnC;AACD;AAbI,OAAP;AAgBD,KA7CD,MA6CO;AACLW,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAlC,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,IAAzB;AACArB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBsB,IAArB;AACAtB,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4B4C,GAA5B,CAAgC,SAAhC,EAA2C,OAA3C;AACA5C,MAAAA,CAAC,CAAC,iIAAD,CAAD,CAAqI6C,QAArI,CAA8I,cAA9I,EALK,CAML;AACD;AACF,GArED;AAuED,CAxFD","sourcesContent":["import {\r\n  inview\r\n} from './inview.js';\r\nimport {\r\n  phoneConvert\r\n} from './phone.js';\r\n// console.log(keys);\r\n\r\n$(document).ready(function () {\r\n\r\n  inview('.content-wrap');\r\n\r\n  var companyId = `RAd6JR`;\r\n  var list = `TjVcCq`;\r\n  var custom_source = `GoAnywhereSignUpPage`;\r\n\r\n  function emailIsValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  //? force phone to only be numbers\r\n  $('.this-form input[name=\"the-phone\"]').on('input', function (e) {\r\n    $(this).val($(this).val().replace(/[^0-9]/g, ''));\r\n  });\r\n\r\n  $('.this-form form button').click(function (e) {\r\n    e.preventDefault();\r\n    // console.log(e.target);\r\n    var fname = $('.this-form input[name=\"fname\"]').val();\r\n    var lname = $('.this-form input[name=\"lname\"]').val();\r\n    var email = $('.this-form input[name=\"email\"]').val();\r\n    var phone = $('.this-form input[name=\"the-phone\"]').val();\r\n    var checkbox = $('.this-form input[type=checkbox]').prop('checked');\r\n    var valid = emailIsValid(email);\r\n    // console.log(`\r\n    //   fname: ${fname}\r\n    //   lname: ${lname}\r\n    //   email: ${email}\r\n    //   checkbox: ${checkbox}\r\n    //   valid: ${valid}`);\r\n\r\n    if (valid && checkbox && fname !== '' && lname !== '') {\r\n      $('.this-form form').hide();\r\n      $('.this-form .sending').show();\r\n\r\n      var theData = {\r\n        data: {\r\n          type: \"subscription\",\r\n          attributes: {\r\n            list_id: list,\r\n            custom_source: custom_source,\r\n            email: email,\r\n            properties: {\r\n              first_name: fname,\r\n              last_name: lname,\r\n            },\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n      if (phone !== `` && phone.length == 10) {\r\n        phone = phoneConvert(phone);\r\n        theData.data.attributes.phone_number = phone;\r\n      }\r\n\r\n      console.log(theData);\r\n\r\n      theData = JSON.stringify(theData);\r\n\r\n      $.ajax({\r\n        url: `https://a.klaviyo.com/client/subscriptions/?company_id=${companyId}`,\r\n        type: 'post',\r\n        data: theData,\r\n        headers: {\r\n          revision: '2023-02-22',\r\n          'content-type': 'application/json'\r\n        },\r\n        success: function (data, status, xhr) {\r\n          console.log('klaviyo success register');\r\n          // jQuery(document).trigger('klaviyoSuccess', data);\r\n          $('.this-form .sending').hide();\r\n          $('.this-form .successfully-sent').show();\r\n        }\r\n      });\r\n\r\n    } else {\r\n      console.log('error');\r\n      $('.this-form .sending').hide();\r\n      $('.this-form form').show();\r\n      $('.this-form .this-error').css('display', 'block');\r\n      $('.this-form input[name=\"fname\"], .this-form input[name=\"lname\"], .this-form input[name=\"email\"], .this-form input[type=checkbox]').addClass('error-border')\r\n      // $('.this-form input').focus();\r\n    }\r\n  });\r\n\r\n});"],"file":"scripts.js"}